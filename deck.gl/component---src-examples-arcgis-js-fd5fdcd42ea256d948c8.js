(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{15:function(t,e){},"7ZmC":function(t,e,r){var n=function(t){"use strict";var e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",o=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(C){c=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof f?e:f,i=Object.create(a.prototype),o=new A(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(a,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return g()}for(r.method=a,r.arg=i;;){var o=r.delegate;if(o){var c=E(o,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(t,r,o),i}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(C){return{type:"throw",arg:C}}}t.wrap=s;var l={};function f(){}function d(){}function _(){}var h={};h[a]=function(){return this};var p=Object.getPrototypeOf,S=p&&p(p(O([])));S&&S!==e&&r.call(S,a)&&(h=S);var y=_.prototype=f.prototype=Object.create(h);function v(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var n;this._invoke=function(a,i){function o(){return new e((function(n,o){!function n(a,i,o,c){var s=u(t[a],t,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,o,c)}),(function(t){n("throw",t,o,c)})):e.resolve(f).then((function(t){l.value=t,o(l)}),(function(t){return n("throw",t,o,c)}))}c(s.arg)}(a,i,n,o)}))}return n=n?n.then(o,o):o()}}function E(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=u(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var a=n.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function m(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(m,this),this.reset(!0)}function O(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:g}}function g(){return{value:void 0,done:!0}}return d.prototype=y.constructor=_,_.constructor=d,d.displayName=c(_,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,c(t,o,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},v(b.prototype),b.prototype[i]=function(){return this},t.AsyncIterator=b,t.async=function(e,r,n,a,i){void 0===i&&(i=Promise);var o=new b(s(e,r,n,a),i);return t.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},v(y),c(y,o,"Generator"),y[a]=function(){return this},y.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(R),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return o.type="throw",o.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),R(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;R(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}(t.exports);try{regeneratorRuntime=n}catch(a){Function("r","regeneratorRuntime = r")(n)}},YqI2:function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return y}));var n=r("vuIU"),a=r("1OyB");new Uint8Array([0]);var i,o,c,s,u,l,f,d,_=[171,75,84,88,32,50,48,187,13,10,26,10];!function(t){t[t.NONE=0]="NONE",t[t.BASISLZ=1]="BASISLZ",t[t.ZSTD=2]="ZSTD",t[t.ZLIB=3]="ZLIB"}(i||(i={})),function(t){t[t.BASICFORMAT=0]="BASICFORMAT"}(o||(o={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.ETC1S=163]="ETC1S",t[t.UASTC=166]="UASTC"}(c||(c={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.SRGB=1]="SRGB"}(s||(s={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.LINEAR=1]="LINEAR",t[t.SRGB=2]="SRGB",t[t.ITU=3]="ITU",t[t.NTSC=4]="NTSC",t[t.SLOG=5]="SLOG",t[t.SLOG2=6]="SLOG2"}(u||(u={})),function(t){t[t.ALPHA_STRAIGHT=0]="ALPHA_STRAIGHT",t[t.ALPHA_PREMULTIPLIED=1]="ALPHA_PREMULTIPLIED"}(l||(l={})),function(t){t[t.RGB=0]="RGB",t[t.RRR=3]="RRR",t[t.GGG=4]="GGG",t[t.AAA=15]="AAA"}(f||(f={})),function(t){t[t.RGB=0]="RGB",t[t.RGBA=3]="RGBA",t[t.RRR=4]="RRR",t[t.RRRG=5]="RRRG"}(d||(d={}));var h=function t(){Object(a.a)(this,t),this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=i.NONE,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:o.BASICFORMAT,versionNumber:2,descriptorBlockSize:40,colorModel:c.UNSPECIFIED,colorPrimaries:s.SRGB,transferFunction:s.SRGB,flags:l.ALPHA_STRAIGHT,texelBlockDimension:{x:4,y:4,z:1,w:1},bytesPlane:[],samples:[]}],this.keyValue={},this.globalData=null},p=function(){function t(e,r,n,i){Object(a.a)(this,t),this._dataView=new DataView(e.buffer,e.byteOffset+r,n),this._littleEndian=i,this._offset=0}return Object(n.a)(t,[{key:"_nextUint8",value:function(){var t=this._dataView.getUint8(this._offset);return this._offset+=1,t}},{key:"_nextUint16",value:function(){var t=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,t}},{key:"_nextUint32",value:function(){var t=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,t}},{key:"_nextUint64",value:function(){var t=this._dataView.getUint32(this._offset,this._littleEndian)+Math.pow(2,32)*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,t}},{key:"_skip",value:function(t){return this._offset+=t,this}},{key:"_scan",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this._offset,n=0;this._dataView.getUint8(this._offset)!==e&&n<t;)n++,this._offset++;return n<t&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+r,n)}}]),t}();function S(e){return"undefined"!=typeof TextDecoder?(new TextDecoder).decode(e):t.from(e).toString("utf8")}function y(t){var e=new Uint8Array(t.buffer,t.byteOffset,_.length);if(e[0]!==_[0]||e[1]!==_[1]||e[2]!==_[2]||e[3]!==_[3]||e[4]!==_[4]||e[5]!==_[5]||e[6]!==_[6]||e[7]!==_[7]||e[8]!==_[8]||e[9]!==_[9]||e[10]!==_[10]||e[11]!==_[11])throw new Error("Missing KTX 2.0 identifier.");var r=new h,n=17*Uint32Array.BYTES_PER_ELEMENT,a=new p(t,_.length,n,!0);r.vkFormat=a._nextUint32(),r.typeSize=a._nextUint32(),r.pixelWidth=a._nextUint32(),r.pixelHeight=a._nextUint32(),r.pixelDepth=a._nextUint32(),r.layerCount=a._nextUint32(),r.faceCount=a._nextUint32();var i=a._nextUint32();r.supercompressionScheme=a._nextUint32();for(var o=a._nextUint32(),c=a._nextUint32(),s=a._nextUint32(),u=a._nextUint32(),l=a._nextUint64(),f=a._nextUint64(),d=new p(t,_.length+n,3*i*8,!0),y=0;y<i;y++)r.levels.push({levelData:new Uint8Array(t.buffer,t.byteOffset+d._nextUint64(),d._nextUint64()),uncompressedByteLength:d._nextUint64()});for(var v=new p(t,o,c,!0),b={vendorId:v._skip(4)._nextUint16(),descriptorType:v._nextUint16(),versionNumber:v._nextUint16(),descriptorBlockSize:v._nextUint16(),colorModel:v._nextUint8(),colorPrimaries:v._nextUint8(),transferFunction:v._nextUint8(),flags:v._nextUint8(),texelBlockDimension:{x:v._nextUint8()+1,y:v._nextUint8()+1,z:v._nextUint8()+1,w:v._nextUint8()+1},bytesPlane:[v._nextUint8(),v._nextUint8(),v._nextUint8(),v._nextUint8(),v._nextUint8(),v._nextUint8(),v._nextUint8(),v._nextUint8()],samples:[]},E=(b.descriptorBlockSize/4-6)/4,m=0;m<E;m++)b.samples[m]={bitOffset:v._nextUint16(),bitLength:v._nextUint8(),channelID:v._nextUint8(),samplePosition:[v._nextUint8(),v._nextUint8(),v._nextUint8(),v._nextUint8()],sampleLower:v._nextUint32(),sampleUpper:v._nextUint32()};r.dataFormatDescriptor.length=0,r.dataFormatDescriptor.push(b);for(var R=new p(t,s,u,!0);R._offset<u;){var A=R._nextUint32(),O=R._scan(A),g=S(O),C=R._scan(A-O.byteLength);r.keyValue[g]=g.match(/^ktx/i)?S(C):C,A%4&&R._skip(4-A%4)}if(f<=0)return r;for(var T=new p(t,l,f,!0),D=T._nextUint16(),P=T._nextUint16(),w=T._nextUint32(),x=T._nextUint32(),M=T._nextUint32(),G=T._nextUint32(),I=[],B=0;B<i;B++)I.push({imageFlags:T._nextUint32(),rgbSliceByteOffset:T._nextUint32(),rgbSliceByteLength:T._nextUint32(),alphaSliceByteOffset:T._nextUint32(),alphaSliceByteLength:T._nextUint32()});var j=l+T._offset,k=j+w,H=k+x,U=H+M,L=new Uint8Array(t.buffer,t.byteOffset+j,w),N=new Uint8Array(t.buffer,t.byteOffset+k,x),F=new Uint8Array(t.buffer,t.byteOffset+H,M),X=new Uint8Array(t.buffer,t.byteOffset+U,G);return r.globalData={endpointCount:D,selectorCount:P,imageDescs:I,endpointsData:L,selectorsData:N,tablesData:F,extendedData:X},r}}).call(this,r("HDXh").Buffer)},gETK:function(t,e,r){"use strict";(function(t,n){r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return o})),r.d(e,"c",(function(){return c}));var a={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==t&&t,document:"undefined"!=typeof document&&document},i=a.global||a.self||a.window||{},o="object"!=typeof n||"[object process]"!==String(n)||n.browser,c="function"==typeof importScripts,s=("undefined"!=typeof window&&window.orientation,void 0!==n&&n.version&&/v([0-9]*)/.exec(n.version));s&&parseFloat(s[1])}).call(this,r("yLpj"),r("8oxB"))},"i+OJ":function(t,e,r){"use strict";r.r(e);var n=r("dI71"),a=r("q1tI"),i=r.n(a),o=r("lxDd"),c=r("o0o1"),s=r.n(c),u=(r("7ZmC"),r("HaE+")),l=r("rePB");r("wcNg");function f(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return d(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=t[Symbol.iterator]()).next.bind(r)}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var _={layers:{},layerFilter:{},parameters:{},effects:{},pickingRadius:{},onBeforeRender:{},onAfterRender:{},onClick:{},onHover:{},onDragStart:{},onDrag:{},onDragEnd:{},onError:{},debug:{},drawPickingColors:{},getCursor:{},getTooltip:{}};var h=r("sY70"),p=r("SOuN"),S=r("8nqg"),y=r("oFBv"),v=r("XQ8I");function b(t){var e=this;Object(p.h)(t),this.buffer=new S.a(t,new Int8Array([-1,-1,1,-1,-1,1,1,1])),this.model=new y.a(t,{vs:"\n      attribute vec2 a_pos;\n      varying vec2 v_texcoord;\n      void main(void) {\n          gl_Position = vec4(a_pos, 0.0, 1.0);\n          v_texcoord = (a_pos + 1.0) / 2.0;\n      }\n    ",fs:"\n      precision mediump float;\n      uniform sampler2D u_texture;\n      varying vec2 v_texcoord;\n      void main(void) {\n          vec4 rgba = texture2D(u_texture, v_texcoord);\n          rgba.rgb *= rgba.a;\n          gl_FragColor = rgba;\n      }\n    ",attributes:{a_pos:this.buffer},vertexCount:4,drawMode:t.TRIANGLE_STRIP}),this.deckFbo=new v.a(t,{width:1,height:1}),this.deckInstance=new h.a({viewState:{},controller:!1,gl:t,parameters:{depthTest:!0},_framebuffer:this.deckFbo,width:null,height:null,_customRender:function(t){"arcgis"===t?e.deckInstance._drawLayers(t):e.redraw()}})}function E(t){var e=this,r=t.gl,n=t.width,a=t.height,i=t.viewState,o=r.getParameter(r.FRAMEBUFFER_BINDING),c=window.devicePixelRatio;n=Math.round(n*c),a=Math.round(a*c),this.deckFbo.resize({width:n,height:a}),this.deckInstance.setProps({viewState:i}),this.deckInstance.redraw("arcgis"),Object(p.o)(r,{blend:!0,blendFunc:[r.ONE,r.ONE_MINUS_SRC_ALPHA],framebuffer:o,viewport:[0,0,n,a]},(function(){e.model.setUniforms({u_texture:e.deckFbo}).draw()}))}function m(){var t,e,r,n;null===(t=this.deckInstance)||void 0===t||t.finalize(),this.deckInstance=null,null===(e=this.model)||void 0===e||e.delete(),null===(r=this.buffer)||void 0===r||r.delete(),null===(n=this.deckFbo)||void 0===n||n.delete()}var R=r("iJYz");function A(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function O(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?A(Object(r),!0).forEach((function(e){Object(l.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var g=null;function C(t,e){return T.apply(this,arguments)}function T(){return(T=Object(u.a)(s.a.mark((function t(e,r){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Array.isArray(e)?null:e,t.next=3,D(n,r);case 3:if(!Array.isArray(e)){t.next=5;break}return t.abrupt("return",Object(R.loadModules)(e,r).then((function(t){return O(O({},g),{},{modules:t})})));case 5:return t.abrupt("return",g);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function D(t,e){return g||(t?P(t.layers.Layer,t.core.Accessor,t.views["2d"].layers.BaseLayerViewGL2D,t.views["3d"].externalRenderers):Object(R.loadModules)(["esri/layers/Layer","esri/core/Accessor","esri/views/2d/layers/BaseLayerViewGL2D","esri/views/3d/externalRenderers"],e).then((function(t){return P(t[0],t[1],t[2],t[3])})))}function P(t,e,r,n){var a=function(t){return t.createSubclass({properties:_,constructor:function(){var t=this;this._callbacks={},this.watch(Object.keys(_),(function(e,r,n){var a;t.emit("change",((a={})[n]=e,a))}))},on:function(t,e){this._callbacks[t]=this._callbacks[t]||[],this._callbacks[t].push(e)},emit:function(t,e){var r=this._callbacks[t];if(r)for(var n,a=f(r);!(n=a()).done;){(0,n.value)(e)}},toJSON:function(){for(var t,e={},r=f(this.keys());!(t=r()).done;){var n=t.value;void 0!==this[n]&&(e[n]=this[n])}return e}})}(e),i=function(t,e,r){return e.createSubclass({properties:{deck:{},blendMode:{},effect:{}},constructor:function(){this.deck=new t},createLayerView:function(t){return"2d"===t.type?new r({view:t,layer:this}):(console.error("DeckLayer does not support SceneView at the moment. Use DeckRenderer instead."),null)}})}(a,t,function(t){return t.createSubclass({properties:{deckgl:{},deckFbo:{},model:{},buffer:{}},attach:function(){var t=this,e=this.context;b.call(this,e),this.layer.deck.on("change",(function(e){return t.deckInstance.setProps(e)})),this.deckInstance.setProps(this.layer.deck.toJSON())},redraw:function(){this.requestRender()},detach:function(){m.call(this)},render:function(t){var e=this.view.state.size,r=e[0],n=e[1],a=t.state;E.call(this,{gl:t.context,width:r,height:n,viewState:{latitude:this.view.center.latitude,longitude:this.view.center.longitude,zoom:this.view.featuresTilingScheme.scaleToLevel(a.scale),bearing:-a.rotation,pitch:0}})}})}(r)),o=function(t,e){return function(){function r(e,r){this.view=e,this.deck=new t(r)}var n=r.prototype;return n.setup=function(t){var e=this,r=t.gl;b.call(this,r),this.deck.on("change",(function(t){return e.deckInstance.setProps(t)})),this.deckInstance.setProps(this.deck.toJSON())},n.dispose=function(){m.call(this)},n.redraw=function(){e.requestRender(this.view)},n.render=function(t){var e,r,n,a,i=this.view.size,o=i[0],c=i[1];E.call(this,{gl:t.gl,width:o,height:c,viewState:{latitude:this.view.center.latitude,longitude:this.view.center.longitude,altitude:(e=this.view.camera.fov,r=o/c,n=Math.sqrt(1+Math.pow(r,2)),a=e/2/180*Math.PI,n/2/Math.tan(a)),zoom:this.view.zoom,bearing:this.view.camera.heading,pitch:this.view.camera.tilt}})},r}()}(a,n);return g={DeckLayer:i,DeckRenderer:o}}var w=r("49Am"),x=r("KQm4"),M=r("p1p/"),G=r("PC3p"),I=r("SDD5"),B=r("kh/P"),j=r("FlnL"),k=r("kEPd"),H={name:"Draco",id:"draco",module:"draco",version:"3.0.12",worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:{draco:{decoderType:"object"==typeof WebAssembly?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}}},U=r("ODXe"),L=r("1OyB"),N=r("vuIU");function F(t){for(var e=1/0,r=1/0,n=1/0,a=-1/0,i=-1/0,o=-1/0,c=t.POSITION?t.POSITION.value:[],s=c&&c.length,u=0;u<s;u+=3){var l=c[u],f=c[u+1],d=c[u+2];e=l<e?l:e,r=f<r?f:r,n=d<n?d:n,a=l>a?l:a,i=f>i?f:i,o=d>o?d:o}return[[e,r,n],[a,i,o]]}function X(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return K(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return K(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){c=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(c)throw i}}}}function K(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var z=function(){function t(e,r){Object(L.a)(this,t),Object(l.a)(this,"fields",void 0),Object(l.a)(this,"metadata",void 0),function(t,e){if(!t)throw new Error(e||"loader assertion failed.")}(Array.isArray(e)),function(t){var e,r={},n=X(t);try{for(n.s();!(e=n.n()).done;){var a=e.value;r[a.name]&&console.warn("Schema: duplicated field name",a.name,a),r[a.name]=!0}}catch(i){n.e(i)}finally{n.f()}}(e),this.fields=e,this.metadata=r||new Map}return Object(N.a)(t,[{key:"compareTo",value:function(t){if(this.metadata!==t.metadata)return!1;if(this.fields.length!==t.fields.length)return!1;for(var e=0;e<this.fields.length;++e)if(!this.fields[e].compareTo(t.fields[e]))return!1;return!0}},{key:"select",value:function(){for(var e=Object.create(null),r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];for(var i=0,o=n;i<o.length;i++){var c=o[i];e[c]=!0}var s=this.fields.filter((function(t){return e[t.name]}));return new t(s,this.metadata)}},{key:"selectAt",value:function(){for(var e=this,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var i=n.map((function(t){return e.fields[t]})).filter(Boolean);return new t(i,this.metadata)}},{key:"assign",value:function(e){var r,n=this.metadata;if(e instanceof t){var a=e;r=a.fields,n=V(V(new Map,this.metadata),a.metadata)}else r=e;var i,o=Object.create(null),c=X(this.fields);try{for(c.s();!(i=c.n()).done;){var s=i.value;o[s.name]=s}}catch(d){c.e(d)}finally{c.f()}var u,l=X(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;o[f.name]=f}}catch(d){l.e(d)}finally{l.f()}return new t(Object.values(o),n)}}]),t}();function V(t,e){return new Map([].concat(Object(x.a)(t||new Map),Object(x.a)(e||new Map)))}var W,q,Q,J,Y=r("JX7q"),Z=r("Ji7U"),$=r("md7G"),tt=r("foSv");function et(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(tt.a)(t);if(e){var a=Object(tt.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object($.a)(this,r)}}!function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth"}(W||(W={}));var rt=function(){function t(){Object(L.a)(this,t)}return Object(N.a)(t,[{key:"typeId",get:function(){return W.NONE}},{key:"compareTo",value:function(t){return this===t}}],[{key:"isNull",value:function(t){return t&&t.typeId===W.Null}},{key:"isInt",value:function(t){return t&&t.typeId===W.Int}},{key:"isFloat",value:function(t){return t&&t.typeId===W.Float}},{key:"isBinary",value:function(t){return t&&t.typeId===W.Binary}},{key:"isUtf8",value:function(t){return t&&t.typeId===W.Utf8}},{key:"isBool",value:function(t){return t&&t.typeId===W.Bool}},{key:"isDecimal",value:function(t){return t&&t.typeId===W.Decimal}},{key:"isDate",value:function(t){return t&&t.typeId===W.Date}},{key:"isTime",value:function(t){return t&&t.typeId===W.Time}},{key:"isTimestamp",value:function(t){return t&&t.typeId===W.Timestamp}},{key:"isInterval",value:function(t){return t&&t.typeId===W.Interval}},{key:"isList",value:function(t){return t&&t.typeId===W.List}},{key:"isStruct",value:function(t){return t&&t.typeId===W.Struct}},{key:"isUnion",value:function(t){return t&&t.typeId===W.Union}},{key:"isFixedSizeBinary",value:function(t){return t&&t.typeId===W.FixedSizeBinary}},{key:"isFixedSizeList",value:function(t){return t&&t.typeId===W.FixedSizeList}},{key:"isMap",value:function(t){return t&&t.typeId===W.Map}},{key:"isDictionary",value:function(t){return t&&t.typeId===W.Dictionary}}]),t}();q=Symbol.toStringTag;var nt=function(t){Object(Z.a)(r,t);var e=et(r);function r(t,n){var a;return Object(L.a)(this,r),a=e.call(this),Object(l.a)(Object(Y.a)(a),"isSigned",void 0),Object(l.a)(Object(Y.a)(a),"bitWidth",void 0),a.isSigned=t,a.bitWidth=n,a}return Object(N.a)(r,[{key:"typeId",get:function(){return W.Int}},{key:q,get:function(){return"Int"}},{key:"toString",value:function(){return"".concat(this.isSigned?"I":"Ui","nt").concat(this.bitWidth)}}]),r}(rt),at=function(t){Object(Z.a)(r,t);var e=et(r);function r(){return Object(L.a)(this,r),e.call(this,!0,8)}return r}(nt),it=function(t){Object(Z.a)(r,t);var e=et(r);function r(){return Object(L.a)(this,r),e.call(this,!0,16)}return r}(nt),ot=function(t){Object(Z.a)(r,t);var e=et(r);function r(){return Object(L.a)(this,r),e.call(this,!0,32)}return r}(nt),ct=function(t){Object(Z.a)(r,t);var e=et(r);function r(){return Object(L.a)(this,r),e.call(this,!1,8)}return r}(nt),st=function(t){Object(Z.a)(r,t);var e=et(r);function r(){return Object(L.a)(this,r),e.call(this,!1,16)}return r}(nt),ut=function(t){Object(Z.a)(r,t);var e=et(r);function r(){return Object(L.a)(this,r),e.call(this,!1,32)}return r}(nt),lt=32,ft=64;Q=Symbol.toStringTag;var dt=function(t){Object(Z.a)(r,t);var e=et(r);function r(t){var n;return Object(L.a)(this,r),n=e.call(this),Object(l.a)(Object(Y.a)(n),"precision",void 0),n.precision=t,n}return Object(N.a)(r,[{key:"typeId",get:function(){return W.Float}},{key:Q,get:function(){return"Float"}},{key:"toString",value:function(){return"Float".concat(this.precision)}}]),r}(rt),_t=function(t){Object(Z.a)(r,t);var e=et(r);function r(){return Object(L.a)(this,r),e.call(this,lt)}return r}(dt),ht=function(t){Object(Z.a)(r,t);var e=et(r);function r(){return Object(L.a)(this,r),e.call(this,ft)}return r}(dt);Symbol.toStringTag;Symbol.toStringTag;Symbol.toStringTag;Symbol.toStringTag;J=Symbol.toStringTag;var pt=function(t){Object(Z.a)(r,t);var e=et(r);function r(t,n){var a;return Object(L.a)(this,r),a=e.call(this),Object(l.a)(Object(Y.a)(a),"listSize",void 0),Object(l.a)(Object(Y.a)(a),"children",void 0),a.listSize=t,a.children=[n],a}return Object(N.a)(r,[{key:"typeId",get:function(){return W.FixedSizeList}},{key:"valueType",get:function(){return this.children[0].type}},{key:"valueField",get:function(){return this.children[0]}},{key:J,get:function(){return"FixedSizeList"}},{key:"toString",value:function(){return"FixedSizeList[".concat(this.listSize,"]<").concat(this.valueType,">")}}]),r}(rt);var St=function(){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Map;Object(L.a)(this,t),Object(l.a)(this,"name",void 0),Object(l.a)(this,"type",void 0),Object(l.a)(this,"nullable",void 0),Object(l.a)(this,"metadata",void 0),this.name=e,this.type=r,this.nullable=n,this.metadata=a}return Object(N.a)(t,[{key:"typeId",get:function(){return this.type&&this.type.typeId}},{key:"clone",value:function(){return new t(this.name,this.type,this.nullable,this.metadata)}},{key:"compareTo",value:function(t){return this.name===t.name&&this.type===t.type&&this.nullable===t.nullable&&this.metadata===t.metadata}},{key:"toString",value:function(){return"".concat(this.type).concat(this.nullable?", nullable":"").concat(this.metadata?", metadata: ".concat(this.metadata):"")}}]),t}();function yt(t,e,r){var n=bt(e.metadata),a=[],i=function(t){var e={};for(var r in t){var n=t[r];e[n.name||"undefined"]=n}return e}(e.attributes);for(var o in t){var c=vt(o,t[o],i[o]);a.push(c)}if(r){var s=vt("indices",r);a.push(s)}return new z(a,n)}function vt(t,e,r){var n=r?bt(r.metadata):void 0,a=function(t){switch(t.constructor){case Int8Array:return new at;case Uint8Array:return new ct;case Int16Array:return new it;case Uint16Array:return new st;case Int32Array:return new ot;case Uint32Array:return new ut;case Float32Array:return new _t;case Float64Array:return new ht;default:throw new Error("array type not supported")}}(e.value);return new St(t,new pt(e.size,new St("value",a)),!1,n)}function bt(t){var e=new Map;for(var r in t)e.set("".concat(r,".string"),JSON.stringify(t[r]));return e}function Et(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return mt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mt(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){c=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(c)throw i}}}}function mt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Rt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function At(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Rt(Object(r),!0).forEach((function(e){Object(l.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Rt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Ot={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},gt={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array},Ct=function(){function t(e){Object(L.a)(this,t),Object(l.a)(this,"draco",void 0),Object(l.a)(this,"decoder",void 0),Object(l.a)(this,"metadataQuerier",void 0),this.draco=e,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}return Object(N.a)(t,[{key:"destroy",value:function(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}},{key:"parseSync",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new this.draco.DecoderBuffer;r.Init(new Int8Array(t),t.byteLength),this._disableAttributeTransforms(e);var n=this.decoder.GetEncodedGeometryType(r),a=n===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{var i;switch(n){case this.draco.TRIANGULAR_MESH:i=this.decoder.DecodeBufferToMesh(r,a);break;case this.draco.POINT_CLOUD:i=this.decoder.DecodeBufferToPointCloud(r,a);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!i.ok()||!a.ptr){var o="DRACO decompression failed: ".concat(i.error_msg());throw new Error(o)}var c=this._getDracoLoaderData(a,n,e),s=this._getMeshData(a,c,e),u=F(s.attributes),l=yt(s.attributes,c,s.indices),f=At(At({loader:"draco",loaderData:c,header:{vertexCount:a.num_points(),boundingBox:u}},s),{},{schema:l});return f}finally{this.draco.destroy(r),a&&this.draco.destroy(a)}}},{key:"_getDracoLoaderData",value:function(t,e,r){var n=this._getTopLevelMetadata(t),a=this._getDracoAttributes(t,r);return{geometry_type:e,num_attributes:t.num_attributes(),num_points:t.num_points(),num_faces:t instanceof this.draco.Mesh?t.num_faces():0,metadata:n,attributes:a}}},{key:"_getDracoAttributes",value:function(t,e){for(var r={},n=0;n<t.num_attributes();n++){var a=this.decoder.GetAttribute(t,n),i=this._getAttributeMetadata(t,n);r[a.unique_id()]={unique_id:a.unique_id(),attribute_type:a.attribute_type(),data_type:a.data_type(),num_components:a.num_components(),byte_offset:a.byte_offset(),byte_stride:a.byte_stride(),normalized:a.normalized(),attribute_index:n,metadata:i};var o=this._getQuantizationTransform(a,e);o&&(r[a.unique_id()].quantization_transform=o);var c=this._getOctahedronTransform(a,e);c&&(r[a.unique_id()].octahedron_transform=c)}return r}},{key:"_getMeshData",value:function(t,e,r){var n=this._getMeshAttributes(e,t,r);if(!n.POSITION)throw new Error("DRACO: No position attribute found.");if(t instanceof this.draco.Mesh)switch(r.topology){case"triangle-strip":return{topology:"triangle-strip",mode:4,attributes:n,indices:{value:this._getTriangleStripIndices(t),size:1}};case"triangle-list":default:return{topology:"triangle-list",mode:5,attributes:n,indices:{value:this._getTriangleListIndices(t),size:1}}}return{topology:"point-list",mode:0,attributes:n}}},{key:"_getMeshAttributes",value:function(t,e,r){for(var n={},a=0,i=Object.values(t.attributes);a<i.length;a++){var o=i[a],c=this._deduceAttributeName(o,r);o.name=c;var s=this._getAttributeValues(e,o),u=s.value,l=s.size;n[c]={value:u,size:l,byteOffset:o.byte_offset,byteStride:o.byte_stride,normalized:o.normalized}}return n}},{key:"_getTriangleListIndices",value:function(t){var e=3*t.num_faces(),r=4*e,n=this.draco._malloc(r);try{return this.decoder.GetTrianglesUInt32Array(t,r,n),new Uint32Array(this.draco.HEAPF32.buffer,n,e).slice()}finally{this.draco._free(n)}}},{key:"_getTriangleStripIndices",value:function(t){var e=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(t,e),function(t){for(var e=t.size(),r=new Int32Array(e),n=0;n<e;n++)r[n]=t.GetValue(n);return r}(e)}finally{this.draco.destroy(e)}}},{key:"_getAttributeValues",value:function(t,e){var r,n=gt[e.data_type],a=e.num_components,i=t.num_points()*a,o=i*n.BYTES_PER_ELEMENT,c=function(t,e){switch(e){case Float32Array:return t.DT_FLOAT32;case Int8Array:return t.DT_INT8;case Int16Array:return t.DT_INT16;case Int32Array:return t.DT_INT32;case Uint8Array:return t.DT_UINT8;case Uint16Array:return t.DT_UINT16;case Uint32Array:return t.DT_UINT32;default:return t.DT_INVALID}}(this.draco,n),s=this.draco._malloc(o);try{var u=this.decoder.GetAttribute(t,e.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(t,u,c,o,s),r=new n(this.draco.HEAPF32.buffer,s,i).slice()}finally{this.draco._free(s)}return{value:r,size:a}}},{key:"_deduceAttributeName",value:function(t,e){for(var r=t.unique_id,n=0,a=Object.entries(e.extraAttributes||{});n<a.length;n++){var i=Object(U.a)(a[n],2),o=i[0];if(i[1]===r)return o}var c=t.attribute_type;for(var s in Ot){if(this.draco[s]===c)return Ot[s]}var u=e.attributeNameEntry||"name";return t.metadata[u]?t.metadata[u].string:"CUSTOM_ATTRIBUTE_".concat(r)}},{key:"_getTopLevelMetadata",value:function(t){var e=this.decoder.GetMetadata(t);return this._getDracoMetadata(e)}},{key:"_getAttributeMetadata",value:function(t,e){var r=this.decoder.GetAttributeMetadata(t,e);return this._getDracoMetadata(r)}},{key:"_getDracoMetadata",value:function(t){if(!t||!t.ptr)return{};for(var e={},r=this.metadataQuerier.NumEntries(t),n=0;n<r;n++){var a=this.metadataQuerier.GetEntryName(t,n);e[a]=this._getDracoMetadataField(t,a)}return e}},{key:"_getDracoMetadataField",value:function(t,e){var r=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(t,e,r);var n=function(t){for(var e=t.size(),r=new Int32Array(e),n=0;n<e;n++)r[n]=t.GetValue(n);return r}(r);return{int:this.metadataQuerier.GetIntEntry(t,e),string:this.metadataQuerier.GetStringEntry(t,e),double:this.metadataQuerier.GetDoubleEntry(t,e),intArray:n}}finally{this.draco.destroy(r)}}},{key:"_disableAttributeTransforms",value:function(t){var e,r=t.quantizedAttributes,n=void 0===r?[]:r,a=t.octahedronAttributes,i=void 0===a?[]:a,o=Et([].concat(Object(x.a)(n),Object(x.a)(i)));try{for(o.s();!(e=o.n()).done;){var c=e.value;this.decoder.SkipAttributeTransform(this.draco[c])}}catch(s){o.e(s)}finally{o.f()}}},{key:"_getQuantizationTransform",value:function(t,e){var r=this,n=e.quantizedAttributes,a=void 0===n?[]:n,i=t.attribute_type();if(a.map((function(t){return r.decoder[t]})).includes(i)){var o=new this.draco.AttributeQuantizationTransform;try{if(o.InitFromAttribute(t))return{quantization_bits:o.quantization_bits(),range:o.range(),min_values:new Float32Array([1,2,3]).map((function(t){return o.min_value(t)}))}}finally{this.draco.destroy(o)}}return null}},{key:"_getOctahedronTransform",value:function(t,e){var r=this,n=e.octahedronAttributes,a=void 0===n?[]:n,i=t.attribute_type();if(a.map((function(t){return r.decoder[t]})).includes(i)){var o=new this.draco.AttributeQuantizationTransform;try{if(o.InitFromAttribute(t))return{quantization_bits:o.quantization_bits()}}finally{this.draco.destroy(o)}}return null}}]),t}();var Tt=r("gETK"),Dt=r(15);var Pt={};function wt(t){return xt.apply(this,arguments)}function xt(){return(xt=Object(u.a)(s.a.mark((function t(e){var r,n,a=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:null,n=a.length>2&&void 0!==a[2]?a[2]:{},r&&(e=Mt(e,r,n)),Pt[e]=Pt[e]||Gt(e),t.next=6,Pt[e];case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Mt(t,e,r){if(t.startsWith("http"))return t;var n=r.modules||{};return n[t]?n[t]:Tt.b?r.CDN?(function(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}(r.CDN.startsWith("http")),"".concat(r.CDN,"/").concat(e,"@").concat("3.0.12","/dist/libs/").concat(t)):Tt.c?"../src/libs/".concat(t):"modules/".concat(e,"/src/libs/").concat(t):"modules/".concat(e,"/dist/libs/").concat(t)}function Gt(t){return It.apply(this,arguments)}function It(){return(It=Object(u.a)(s.a.mark((function t(e){var r,n,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.endsWith("wasm")){t.next=7;break}return t.next=3,fetch(e);case 3:return r=t.sent,t.next=6,r.arrayBuffer();case 6:return t.abrupt("return",t.sent);case 7:if(Tt.b){t.next=14;break}if(t.t0=Dt.requireFromFile,!t.t0){t.next=13;break}return t.next=12,Dt.requireFromFile(e);case 12:t.t0=t.sent;case 13:return t.abrupt("return",t.t0);case 14:if(!Tt.c){t.next=16;break}return t.abrupt("return",importScripts(e));case 16:return t.next=18,fetch(e);case 18:return n=t.sent,t.next=21,n.text();case 21:return a=t.sent,t.abrupt("return",Bt(a,e));case 23:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Bt(t,e){if(!Tt.b)return Dt.requireFromString&&Dt.requireFromString(t,e);if(Tt.c)return eval.call(Tt.a,t),null;var r=document.createElement("script");r.id=e;try{r.appendChild(document.createTextNode(t))}catch(n){r.text=t}return document.body.appendChild(r),null}function jt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function kt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?jt(Object(r),!0).forEach((function(e){Object(l.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Ht,Ut="https://www.gstatic.com/draco/versioned/decoders/".concat("1.4.1","/draco_decoder.js"),Lt="https://www.gstatic.com/draco/versioned/decoders/".concat("1.4.1","/draco_wasm_wrapper.js"),Nt="https://www.gstatic.com/draco/versioned/decoders/".concat("1.4.1","/draco_decoder.wasm");"https://raw.githubusercontent.com/google/draco/".concat("1.4.1","/javascript/draco_encoder.js");function Ft(t){return Xt.apply(this,arguments)}function Xt(){return(Xt=Object(u.a)(s.a.mark((function t(e){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.modules||{},Ht=r.draco3d?Ht||r.draco3d.createDecoderModule({}).then((function(t){return{draco:t}})):Ht||Kt(e),t.next=4,Ht;case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Kt(t){return zt.apply(this,arguments)}function zt(){return(zt=Object(u.a)(s.a.mark((function t(e){var r,n,a,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e.draco&&e.draco.decoderType,t.next="js"===t.t0?3:(t.t0,7);break;case 3:return t.next=5,wt(Ut,"draco",e);case 5:return r=t.sent,t.abrupt("break",21);case 7:return t.t1=Promise,t.next=10,wt(Lt,"draco",e);case 10:return t.t2=t.sent,t.next=13,wt(Nt,"draco",e);case 13:return t.t3=t.sent,t.t4=[t.t2,t.t3],t.next=17,t.t1.all.call(t.t1,t.t4);case 17:a=t.sent,i=Object(U.a)(a,2),r=i[0],n=i[1];case 21:return r=r||globalThis.DracoDecoderModule,t.next=24,Vt(r,n);case 24:return t.abrupt("return",t.sent);case 25:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Vt(t,e){var r={};return e&&(r.wasmBinary=e),new Promise((function(e){t(kt(kt({},r),{},{onModuleLoaded:function(t){return e({draco:t})}}))}))}function Wt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function qt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Wt(Object(r),!0).forEach((function(e){Object(l.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Wt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Qt=qt(qt({},H),{},{parse:function(t,e){return Jt.apply(this,arguments)}});function Jt(){return(Jt=Object(u.a)(s.a.mark((function t(e,r){var n,a,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ft(r);case 2:return n=t.sent,a=n.draco,i=new Ct(a),t.prev=5,t.abrupt("return",i.parseSync(e,null==r?void 0:r.draco));case 7:return t.prev=7,i.destroy(),t.finish(7);case 10:case"end":return t.stop()}}),t,null,[[5,,7,10]])})))).apply(this,arguments)}var Yt=r("YqI2");function Zt(t,e){for(var r=new Array(e.mipMapLevels),n=e.width,a=e.height,i=0,o=0;o<e.mipMapLevels;++o){var c=te(e,n,a,t,o),s=$t(t,o,i,c);r[o]={compressed:!0,format:e.internalFormat,data:s,width:n,height:a,levelSize:c},n=Math.max(1,n>>1),a=Math.max(1,a>>1),i+=c}return r}function $t(t,e,r,n){return Array.isArray(t)?t[e].levelData:new Uint8Array(t.buffer,t.byteOffset+r,n)}function te(t,e,r,n,a){return Array.isArray(n)?t.sizeFunction(n[a]):t.sizeFunction(e,r)}var ee={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35987,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,COMPRESSED_RGBA_ASTC_4X4_KHR:37808,COMPRESSED_RGBA_ASTC_5X4_KHR:37809,COMPRESSED_RGBA_ASTC_5X5_KHR:37810,COMPRESSED_RGBA_ASTC_6X5_KHR:37811,COMPRESSED_RGBA_ASTC_6X6_KHR:37812,COMPRESSED_RGBA_ASTC_8X5_KHR:37813,COMPRESSED_RGBA_ASTC_8X6_KHR:37814,COMPRESSED_RGBA_ASTC_8X8_KHR:37815,COMPRESSED_RGBA_ASTC_10X5_KHR:37816,COMPRESSED_RGBA_ASTC_10X6_KHR:37817,COMPRESSED_RGBA_ASTC_10X8_KHR:37818,COMPRESSED_RGBA_ASTC_10X10_KHR:37819,COMPRESSED_RGBA_ASTC_12X10_KHR:37820,COMPRESSED_RGBA_ASTC_12X12_KHR:37821,COMPRESSED_SRGB8_ALPHA8_ASTC_4X4_KHR:37840,COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR:37841,COMPRESSED_SRGB8_ALPHA8_ASTC_5X5_KHR:37842,COMPRESSED_SRGB8_ALPHA8_ASTC_6X5_KHR:37843,COMPRESSED_SRGB8_ALPHA8_ASTC_6X6_KHR:37844,COMPRESSED_SRGB8_ALPHA8_ASTC_8X5_KHR:37845,COMPRESSED_SRGB8_ALPHA8_ASTC_8X6_KHR:37846,COMPRESSED_SRGB8_ALPHA8_ASTC_8X8_KHR:37847,COMPRESSED_SRGB8_ALPHA8_ASTC_10X5_KHR:37848,COMPRESSED_SRGB8_ALPHA8_ASTC_10X6_KHR:37849,COMPRESSED_SRGB8_ALPHA8_ASTC_10X8_KHR:37850,COMPRESSED_SRGB8_ALPHA8_ASTC_10X10_KHR:37851,COMPRESSED_SRGB8_ALPHA8_ASTC_12X10_KHR:37852,COMPRESSED_SRGB8_ALPHA8_ASTC_12X12_KHR:37853,COMPRESSED_RED_RGTC1_EXT:36283,COMPRESSED_SIGNED_RED_RGTC1_EXT:36284,COMPRESSED_RED_GREEN_RGTC2_EXT:36285,COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT:36286,COMPRESSED_SRGB_S3TC_DXT1_EXT:35916,COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT:35917,COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT:35918,COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT:35919},re={131:ee.COMPRESSED_RGB_S3TC_DXT1_EXT,132:ee.COMPRESSED_SRGB_S3TC_DXT1_EXT,133:ee.COMPRESSED_RGBA_S3TC_DXT1_EXT,134:ee.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,135:ee.COMPRESSED_RGBA_S3TC_DXT3_EXT,136:ee.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,137:ee.COMPRESSED_RGBA_S3TC_DXT5_EXT,138:ee.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,139:ee.COMPRESSED_RED_RGTC1_EXT,140:ee.COMPRESSED_SIGNED_RED_RGTC1_EXT,141:ee.COMPRESSED_RED_GREEN_RGTC2_EXT,142:ee.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT,147:ee.COMPRESSED_RGB8_ETC2,148:ee.COMPRESSED_SRGB8_ETC2,149:ee.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,150:ee.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,151:ee.COMPRESSED_RGBA8_ETC2_EAC,152:ee.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC,153:ee.COMPRESSED_R11_EAC,154:ee.COMPRESSED_SIGNED_R11_EAC,155:ee.COMPRESSED_RG11_EAC,156:ee.COMPRESSED_SIGNED_RG11_EAC,157:ee.COMPRESSED_RGBA_ASTC_4x4_KHR,158:ee.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR,159:ee.COMPRESSED_RGBA_ASTC_5x4_KHR,160:ee.COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR,161:ee.COMPRESSED_RGBA_ASTC_5x5_KHR,162:ee.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR,163:ee.COMPRESSED_RGBA_ASTC_6x5_KHR,164:ee.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR,165:ee.COMPRESSED_RGBA_ASTC_6x6_KHR,166:ee.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR,167:ee.COMPRESSED_RGBA_ASTC_8x5_KHR,168:ee.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR,169:ee.COMPRESSED_RGBA_ASTC_8x6_KHR,170:ee.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR,171:ee.COMPRESSED_RGBA_ASTC_8x8_KHR,172:ee.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR,173:ee.COMPRESSED_RGBA_ASTC_10x5_KHR,174:ee.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR,175:ee.COMPRESSED_RGBA_ASTC_10x6_KHR,176:ee.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR,177:ee.COMPRESSED_RGBA_ASTC_10x8_KHR,178:ee.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR,179:ee.COMPRESSED_RGBA_ASTC_10x10_KHR,180:ee.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR,181:ee.COMPRESSED_RGBA_ASTC_12x10_KHR,182:ee.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR,183:ee.COMPRESSED_RGBA_ASTC_12x12_KHR,184:ee.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR,1000054e3:ee.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG,1000054001:ee.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG,1000066e3:ee.COMPRESSED_RGBA_ASTC_4x4_KHR,1000066001:ee.COMPRESSED_RGBA_ASTC_5x4_KHR,1000066002:ee.COMPRESSED_RGBA_ASTC_5x5_KHR,1000066003:ee.COMPRESSED_RGBA_ASTC_6x5_KHR,1000066004:ee.COMPRESSED_RGBA_ASTC_6x6_KHR,1000066005:ee.COMPRESSED_RGBA_ASTC_8x5_KHR,1000066006:ee.COMPRESSED_RGBA_ASTC_8x6_KHR,1000066007:ee.COMPRESSED_RGBA_ASTC_8x8_KHR,1000066008:ee.COMPRESSED_RGBA_ASTC_10x5_KHR,1000066009:ee.COMPRESSED_RGBA_ASTC_10x6_KHR,1000066010:ee.COMPRESSED_RGBA_ASTC_10x8_KHR,1000066011:ee.COMPRESSED_RGBA_ASTC_10x10_KHR,1000066012:ee.COMPRESSED_RGBA_ASTC_12x10_KHR,1000066013:ee.COMPRESSED_RGBA_ASTC_12x12_KHR};var ne=[171,75,84,88,32,50,48,187,13,10,26,10];function ae(t){var e,r=new Uint8Array(t),n=Object(Yt.a)(r),a=Math.max(1,n.levels.length),i=n.pixelWidth,o=n.pixelHeight,c=(e=n.vkFormat,re[e]);return Zt(n.levels,{mipMapLevels:a,width:i,height:o,sizeFunction:function(t){return t.uncompressedByteLength},internalFormat:c})}var ie=r("DYWF"),oe={MAGIC_NUMBER:542327876,HEADER_LENGTH:31,MAGIC_NUMBER_INDEX:0,HEADER_SIZE_INDEX:1,HEADER_FLAGS_INDEX:2,HEADER_HEIGHT_INDEX:3,HEADER_WIDTH_INDEX:4,MIPMAPCOUNT_INDEX:7,HEADER_PF_FLAGS_INDEX:20,HEADER_PF_FOURCC_INDEX:21,DDSD_MIPMAPCOUNT:131072,DDPF_FOURCC:4,PIXEL_FORMATS:{DXT1:ee.COMPRESSED_RGB_S3TC_DXT1_EXT,DXT3:ee.COMPRESSED_RGBA_S3TC_DXT3_EXT,DXT5:ee.COMPRESSED_RGBA_S3TC_DXT5_EXT,"ATC ":ee.COMPRESSED_RGB_ATC_WEBGL,ATCA:ee.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL,ATCI:ee.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL},SIZE_FUNCTIONS:{DXT1:se,DXT3:ue,DXT5:ue,"ATC ":se,ATCA:ue,ATCI:ue}};function ce(t){var e=new Int32Array(t,0,oe.HEADER_LENGTH),r=e[oe.HEADER_PF_FOURCC_INDEX];Object(ie.a)(Boolean(e[oe.HEADER_PF_FLAGS_INDEX]&oe.DDPF_FOURCC),"DDS: Unsupported format, must contain a FourCC code");var n,a=(n=r,String.fromCharCode(255&n,n>>8&255,n>>16&255,n>>24&255)),i=oe.PIXEL_FORMATS[a],o=oe.SIZE_FUNCTIONS[a];Object(ie.a)(i&&o,"DDS: Unknown pixel format ".concat(r));var c=1;e[oe.HEADER_FLAGS_INDEX]&oe.DDSD_MIPMAPCOUNT&&(c=Math.max(1,e[oe.MIPMAPCOUNT_INDEX]));var s=e[oe.HEADER_WIDTH_INDEX],u=e[oe.HEADER_HEIGHT_INDEX],l=e[oe.HEADER_SIZE_INDEX]+4;return Zt(new Uint8Array(t,l),{mipMapLevels:c,width:s,height:u,sizeFunction:o,internalFormat:i})}function se(t,e){return(t+3>>2)*(e+3>>2)*8}function ue(t,e){return(t+3>>2)*(e+3>>2)*16}var le=55727696,fe=1347834371,de=13,_e=52,he=0,pe=2,Se=4,ye=6,ve=7,be=11,Ee=12,me={0:[ee.COMPRESSED_RGB_PVRTC_2BPPV1_IMG],1:[ee.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG],2:[ee.COMPRESSED_RGB_PVRTC_4BPPV1_IMG],3:[ee.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG],6:[ee.COMPRESSED_RGB_ETC1_WEBGL],7:[ee.COMPRESSED_RGB_S3TC_DXT1_EXT],9:[ee.COMPRESSED_RGBA_S3TC_DXT3_EXT],11:[ee.COMPRESSED_RGBA_S3TC_DXT5_EXT],22:[ee.COMPRESSED_RGB8_ETC2],23:[ee.COMPRESSED_RGBA8_ETC2_EAC],24:[ee.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2],25:[ee.COMPRESSED_R11_EAC],26:[ee.COMPRESSED_RG11_EAC],27:[ee.COMPRESSED_RGBA_ASTC_4X4_KHR,ee.COMPRESSED_SRGB8_ALPHA8_ASTC_4X4_KHR],28:[ee.COMPRESSED_RGBA_ASTC_5X4_KHR,ee.COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR],29:[ee.COMPRESSED_RGBA_ASTC_5X5_KHR,ee.COMPRESSED_SRGB8_ALPHA8_ASTC_5X5_KHR],30:[ee.COMPRESSED_RGBA_ASTC_6X5_KHR,ee.COMPRESSED_SRGB8_ALPHA8_ASTC_6X5_KHR],31:[ee.COMPRESSED_RGBA_ASTC_6X6_KHR,ee.COMPRESSED_SRGB8_ALPHA8_ASTC_6X6_KHR],32:[ee.COMPRESSED_RGBA_ASTC_8X5_KHR,ee.COMPRESSED_SRGB8_ALPHA8_ASTC_8X5_KHR],33:[ee.COMPRESSED_RGBA_ASTC_8X6_KHR,ee.COMPRESSED_SRGB8_ALPHA8_ASTC_8X6_KHR],34:[ee.COMPRESSED_RGBA_ASTC_8X8_KHR,ee.COMPRESSED_SRGB8_ALPHA8_ASTC_8X8_KHR],35:[ee.COMPRESSED_RGBA_ASTC_10X5_KHR,ee.COMPRESSED_SRGB8_ALPHA8_ASTC_10X5_KHR],36:[ee.COMPRESSED_RGBA_ASTC_10X6_KHR,ee.COMPRESSED_SRGB8_ALPHA8_ASTC_10X6_KHR],37:[ee.COMPRESSED_RGBA_ASTC_10X8_KHR,ee.COMPRESSED_SRGB8_ALPHA8_ASTC_10X8_KHR],38:[ee.COMPRESSED_RGBA_ASTC_10X10_KHR,ee.COMPRESSED_SRGB8_ALPHA8_ASTC_10X10_KHR],39:[ee.COMPRESSED_RGBA_ASTC_12X10_KHR,ee.COMPRESSED_SRGB8_ALPHA8_ASTC_12X10_KHR],40:[ee.COMPRESSED_RGBA_ASTC_12X12_KHR,ee.COMPRESSED_SRGB8_ALPHA8_ASTC_12X12_KHR]},Re={0:Ae,1:Ae,2:Oe,3:Oe,6:ge,7:ge,9:Ce,11:Ce,22:ge,23:Ce,24:ge,25:ge,26:Ce,27:Ce,28:function(t,e){return Math.floor((t+4)/5)*Math.floor((e+3)/4)*16},29:function(t,e){return Math.floor((t+4)/5)*Math.floor((e+4)/5)*16},30:function(t,e){return Math.floor((t+5)/6)*Math.floor((e+4)/5)*16},31:function(t,e){return Math.floor((t+5)/6)*Math.floor((e+5)/6)*16},32:function(t,e){return Math.floor((t+7)/8)*Math.floor((e+4)/5)*16},33:function(t,e){return Math.floor((t+7)/8)*Math.floor((e+5)/6)*16},34:function(t,e){return Math.floor((t+7)/8)*Math.floor((e+7)/8)*16},35:function(t,e){return Math.floor((t+9)/10)*Math.floor((e+4)/5)*16},36:function(t,e){return Math.floor((t+9)/10)*Math.floor((e+5)/6)*16},37:function(t,e){return Math.floor((t+9)/10)*Math.floor((e+7)/8)*16},38:function(t,e){return Math.floor((t+9)/10)*Math.floor((e+9)/10)*16},39:function(t,e){return Math.floor((t+11)/12)*Math.floor((e+9)/10)*16},40:function(t,e){return Math.floor((t+11)/12)*Math.floor((e+11)/12)*16}};function Ae(t,e){return(t=Math.max(t,16))*(e=Math.max(e,8))/4}function Oe(t,e){return(t=Math.max(t,8))*(e=Math.max(e,8))/2}function ge(t,e){return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8}function Ce(t,e){return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16}function Te(t){if(function(t){var e=new Uint8Array(t.buffer||t,t.byteOffset||0,ne.length);return!(e[0]!==ne[0]||e[1]!==ne[1]||e[2]!==ne[2]||e[3]!==ne[3]||e[4]!==ne[4]||e[5]!==ne[5]||e[6]!==ne[6]||e[7]!==ne[7]||e[8]!==ne[8]||e[9]!==ne[9]||e[10]!==ne[10]||e[11]!==ne[11])}(t))return ae(t);if(function(t){return new Uint32Array(t,0,oe.HEADER_LENGTH)[oe.MAGIC_NUMBER_INDEX]===oe.MAGIC_NUMBER}(t))return ce(t);if(function(t){var e=new Uint32Array(t,0,de)[he];return e===le||e===fe}(t))return function(t){var e=new Uint32Array(t,0,de),r=e[pe],n=e[Se],a=me[r]||[],i=a.length>1&&n?a[1]:a[0],o=Re[r],c=e[be],s=e[ve],u=e[ye],l=_e+e[Ee];return Zt(new Uint8Array(t,l),{mipMapLevels:c,width:s,height:u,sizeFunction:o,internalFormat:i})}(t);throw new Error("Texture container format not recognized")}function De(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Pe(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?De(Object(r),!0).forEach((function(e){Object(l.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):De(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var we,xe={name:"Texture Containers",id:"compressed-texture",module:"textures",version:"3.0.12",worker:!0,extensions:["ktx","ktx2","dds","pvr"],mimeTypes:["image/ktx2","image/ktx","image/vnd-ms.dds","image/x-dds","application/octet-stream"],binary:!0,options:{"compressed-texture":{libraryPath:"libs/"}}},Me=Pe(Pe({},xe),{},{parse:(we=Object(u.a)(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Te(e));case 1:case"end":return t.stop()}}),t)}))),function(t){return we.apply(this,arguments)})});function Ge(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e?"".concat(t,"?token=").concat(e):t}function Ie(t,e){for(var r=[],n=t.attributeStorageInfo,a=t.url,i=0;i<n.length;i++){var o=n[i].key;r.push("".concat(a,"/nodes/").concat(e,"/attributes/").concat(o,"/0"))}return r}var Be=r("0mpS"),je={UInt8:Uint8Array,UInt16:Uint16Array,UInt32:Uint32Array,Float32:Float32Array,UInt64:Float64Array},ke={UInt8:Be.a.UNSIGNED_BYTE,UInt16:Be.a.UNSIGNED_INT,Float32:Be.a.FLOAT,UInt32:Be.a.UNSIGNED_INT,UInt64:Be.a.DOUBLE},He={position:"position",normal:"normal",uv0:"uv0",color:"color",region:"region"},Ue={vertexAttributes:"vertexAttributes",featureAttributeOrder:"featureAttributeOrder",featureAttributes:"featureAttributes"},Le="header",Ne="vertexCount",Fe="featureCount",Xe={UInt8:1,UInt16:2,UInt32:4,Float32:4,UInt64:8};function Ke(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return ze(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ze(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){c=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(c)throw i}}}}function ze(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ve(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function We(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ve(Object(r),!0).forEach((function(e){Object(l.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ve(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var qe=new I.a([0,0,0]),Qe={jpeg:k.a,png:k.a,"ktx-etc2":Me,dds:Me};function Je(t,e,r,n,a){return Ye.apply(this,arguments)}function Ye(){return(Ye=Object(u.a)(s.a.mark((function t(e,r,n,a,i){var o,c,u,l,f,d,_;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.content=r.content||{},r.content.featureIds=r.content.featureIds||null,r.content.featureData=nr(r,n),r.content.attributes={},!r.textureUrl){t.next=25;break}return c=Ge(r.textureUrl,null==a||null===(o=a.i3s)||void 0===o?void 0:o.token),u=Qe[r.textureFormat]||k.a,t.next=9,fetch(c);case 9:return l=t.sent,t.next=12,l.arrayBuffer();case 12:if(f=t.sent,u!==k.a){t.next=20;break}return d={image:{type:"data"}},t.next=17,i.parse(f,d);case 17:r.content.texture=t.sent,t.next=25;break;case 20:if(u!==Me){t.next=25;break}return t.next=23,Object(M.a)(f,Me);case 23:_=t.sent,r.content.texture={compressed:!0,mipmaps:!1,width:_[0].width,height:_[0].height,data:_};case 25:return r.content.material=sr(r.materialDefinition,r.content.texture),r.content.material&&(r.content.texture=null),t.next=29,Ze(e,r,i);case 29:return t.abrupt("return",t.sent);case 30:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ze(t){return $e.apply(this,arguments)}function $e(){return($e=Object(u.a)(s.a.mark((function t(e){var r,n,a,i,o,c,u,l,f,d,_,h,p,S,y,v,b,E,m,R,A,O,g,C,T,D,P,w,x,M,I,j,k,H=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=H.length>1&&void 0!==H[1]?H[1]:{},H.length>2?H[2]:void 0,r.content){t.next=4;break}return t.abrupt("return",r);case 4:if(n=r.content,o=0,c=0,!r.isDracoGeometry){t.next=20;break}return t.next=10,Object(G.a)(e,Qt,{draco:{attributeNameEntry:"i3s-attribute-type"}});case 10:u=t.sent,i=u.header.vertexCount,l=u.indices.value,f=u.attributes,d=f.POSITION,_=f.NORMAL,h=f.COLOR_0,p=f.TEXCOORD_0,S=f["feature-index"],y=f["uv-region"],tr(a={position:d,normal:_,color:h,uv0:p,uvRegion:y,id:S,indices:l},u),(v=dr(S))&&fr(a,v),t.next=29;break;case 20:b=n.featureData,E=b.vertexAttributes,m=b.attributesOrder,R=b.featureAttributes,A=b.featureAttributeOrder,O=ar(n,e),o=O.byteOffset,i=O.vertexCount,c=O.featureCount,g=ir(e,o,E,i,m),C=g.attributes,T=g.byteOffset,D=ir(e,T,R,c,A),lr(P=D.attributes),a=er(C,P);case 29:for(k in w=cr(a.position,r),x=w.enuMatrix,M=w.cartographicOrigin,I=w.cartesianOrigin,j=(new B.a).multiplyRight(x),n.attributes={positions:a.position,normals:a.normal,colors:rr(a.color),texCoords:a.uv0,uvRegions:rr(a.uvRegion)},n.indices=a.indices||null,a.id&&a.id.value&&(r.content.featureIds=a.id.value),n.attributes)n.attributes[k]||delete n.attributes[k];return n.vertexCount=i,n.cartographicCenter=M,n.cartesianOrigin=I,n.modelMatrix=j.invert(),n.byteLength=e.byteLength,t.abrupt("return",r);case 41:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function tr(t,e){for(var r in e.loaderData.attributes){var n=e.loaderData.attributes[r];switch(n.name){case"POSITION":t.position.metadata=n.metadata;break;case"feature-index":t.id.metadata=n.metadata}}}function er(t,e){return We(We({},t),e)}function rr(t){return t?(t.normalized=!0,t):t}function nr(t,e){var r=e.store.defaultGeometrySchema,n=r;for(var a in Ue)for(var i in He){var o=r[a][i];if(o){var c=o.byteOffset,s=void 0===c?0:c,u=o.count,l=void 0===u?0:u,f=o.valueType,d=o.valuesPerElement;n[a][i]={valueType:f,valuesPerElement:d,byteOffset:s,count:l}}}return n.attributesOrder=r.ordering,n}function ar(t,e){var r=0,n=0,a=0,i=t.featureData[Le];for(var o in i){var c=i[o],s=c.property,u=c.type,l=je[u];s===Ne&&(n=new l(e,0,4)[0],r+=Xe[u]),s===Fe&&(a=new l(e,4,4)[0],r+=Xe[u])}return{vertexCount:n,featureCount:a,byteOffset:r}}function ir(t,e,r,n,a){var i,o={},c=Ke(a);try{for(c.s();!(i=c.n()).done;){var s=i.value;if(r[s]){var u=r[s],l=u.valueType,f=u.valuesPerElement,d=n;if(e+d*f>t.byteLength)break;var _=t.slice(e),h=[];if("UInt64"===l)h=or(_,d*f,Xe[l]);else h=new(0,je[l])(_,0,d*f);switch(o[s]={value:h,type:ke[l],size:f},s){case"color":o.color.normalized=!0}e+=d*f*Xe[l]}}}catch(p){c.e(p)}finally{c.f()}return{attributes:o,byteOffset:e}}function or(t,e,r){for(var n=[],a=new DataView(t),i=0,o=0;o<e;o++){var c=a.getUint32(i,!0),s=a.getUint32(i+4,!0),u=c+Math.pow(2,32)*s;n.push(u),i+=r}return n}function cr(t,e){var r=e.mbs,n=t.value,a=t.metadata,i=new B.a,o=new I.a(r[0],r[1],r[2]),c=new I.a;return j.a.WGS84.cartographicToCartesian(o,c),j.a.WGS84.eastNorthUpToFixedFrame(c,i),t.value=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=new Float64Array(t.length),a=e["i3s-scale_x"]&&e["i3s-scale_x"].double||1,i=e["i3s-scale_y"]&&e["i3s-scale_y"].double||1,o=0;o<n.length;o+=3)n[o]=t[o]*a+r.x,n[o+1]=t[o+1]*i+r.y,n[o+2]=t[o+2]+r.z;for(var c=0;c<n.length;c+=3)j.a.WGS84.cartographicToCartesian(n.subarray(c,c+3),qe),n[c]=qe.x,n[c+1]=qe.y,n[c+2]=qe.z;return n}(n,a,o),{enuMatrix:i,fixedFrameToENUMatrix:i.invert(),cartographicOrigin:o,cartesianOrigin:c}}function sr(t,e){var r;return t?r=We(We({},t),{},{pbrMetallicRoughness:t.pbrMetallicRoughness?We({},t.pbrMetallicRoughness):{baseColorFactor:[255,255,255,255]}}):(r={pbrMetallicRoughness:{}},e?r.pbrMetallicRoughness.baseColorTexture={texCoord:0}:r.pbrMetallicRoughness.baseColorFactor=[255,255,255,255]),r.alphaCutoff=r.alphaCutoff||.25,r.alphaMode&&(r.alphaMode=r.alphaMode.toUpperCase()),r.emissiveFactor&&(r.emissiveFactor=ur(r.emissiveFactor)),r.pbrMetallicRoughness&&r.pbrMetallicRoughness.baseColorFactor&&(r.pbrMetallicRoughness.baseColorFactor=ur(r.pbrMetallicRoughness.baseColorFactor)),function(t,e){var r={source:{image:e}};t.pbrMetallicRoughness&&t.pbrMetallicRoughness.baseColorTexture?t.pbrMetallicRoughness.baseColorTexture=We(We({},t.pbrMetallicRoughness.baseColorTexture),{},{texture:r}):t.emissiveTexture?t.emissiveTexture=We(We({},t.emissiveTexture),{},{texture:r}):t.pbrMetallicRoughness&&t.pbrMetallicRoughness.metallicRoughnessTexture?t.pbrMetallicRoughness.metallicRoughnessTexture=We(We({},t.pbrMetallicRoughness.metallicRoughnessTexture),{},{texture:r}):t.normalTexture?t.normalTexture=We(We({},t.normalTexture),{},{texture:r}):t.occlusionTexture&&(t.occlusionTexture=We(We({},t.occlusionTexture),{},{texture:r}))}(r,e),r}function ur(t){for(var e=Object(x.a)(t),r=0;r<t.length;r++)e[r]=t[r]/255;return e}function lr(t){var e=t.id,r=t.faceRange;if(e&&r){for(var n=e.value,a=r.value,i=a[a.length-1]+1,o=new Uint32Array(3*i),c=0,s=0,u=1;u<a.length;u+=2){var l=Number(n[c]),f=s+3*(a[u]-a[u-1]+1);o.fill(l,s,f),c++,s=f}t.id.value=o}}function fr(t,e){for(var r=t.id.value,n=new Float32Array(r.length),a=0;a<r.length;a++)n[a]=e[r[a]];t.id.value=n}function dr(t){return t&&t.metadata&&t.metadata["i3s-feature-ids"]&&t.metadata["i3s-feature-ids"].intArray}var _r={name:"I3S Content (Indexed Scene Layers)",id:"i3s-content",module:"i3s",worker:!0,version:"3.0.12",mimeTypes:["application/octet-stream"],parse:function(t,e,r){return hr.apply(this,arguments)},extensions:["bin"],options:{"i3s-content":{}}};function hr(){return(hr=Object(u.a)(s.a.mark((function t(e,r,n){var a,i,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=(null==r?void 0:r.i3s)||{},i=a.tile,o=a.tileset,t.next=3,Je(e,i,o,r,n);case 3:return t.abrupt("return",i.content);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var pr=r("DUak"),Sr=2,yr="mesh",vr="I3S";function br(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return Er(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Er(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){c=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(c)throw i}}}}function Er(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var mr=["","WEBKIT_","MOZ_"],Rr={WEBGL_compressed_texture_s3tc:"dxt",WEBGL_compressed_texture_s3tc_srgb:"dxt-srgb",WEBGL_compressed_texture_etc1:"etc1",WEBGL_compressed_texture_etc:"etc2",WEBGL_compressed_texture_pvrtc:"pvrtc",WEBGL_compressed_texture_atc:"atc",WEBGL_compressed_texture_astc:"astc",EXT_texture_compression_rgtc:"rgtc"},Ar=null;function Or(t){if(!Ar){t=t||function(){try{return document.createElement("canvas").getContext("webgl")}catch(t){return null}}()||void 0,Ar=new Set;var e,r=br(mr);try{for(r.s();!(e=r.n()).done;){var n=e.value;for(var a in Rr)if(t&&t.getExtension("".concat(n).concat(a))){var i=Rr[a];Ar.add(i)}}}catch(o){r.e(o)}finally{r.f()}}return Ar}function gr(t){return Cr.apply(this,arguments)}function Cr(){return(Cr=Object(u.a)(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",JSON.parse((new TextDecoder).decode(e)));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Tr={name:"I3S Node Page",id:"i3s-node-page",module:"i3s",version:"3.0.12",mimeTypes:["application/json"],parse:function(t){return Dr.apply(this,arguments)},extensions:["json"],options:{}};function Dr(){return(Dr=Object(u.a)(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=gr(e),t.abrupt("return",e);case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Pr(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return wr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wr(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){c=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(c)throw i}}}}function wr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function xr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var Mr=function(){function t(e,r){Object(L.a)(this,t),Object(l.a)(this,"tileset",void 0),Object(l.a)(this,"nodePages",void 0),Object(l.a)(this,"nodesPerPage",void 0),Object(l.a)(this,"options",void 0),Object(l.a)(this,"lodSelectionMetricType",void 0),Object(l.a)(this,"textureDefinitionsSelectedFormats",void 0),this.tileset=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?xr(Object(r),!0).forEach((function(e){Object(l.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},e),this.nodesPerPage=e.nodePages.nodesPerPage,this.lodSelectionMetricType=e.nodePages.lodSelectionMetricType,this.options=r,this.nodePages=[],this.textureDefinitionsSelectedFormats=[],this._initSelectedFormatsForTextureDefinitions(e)}var e,r;return Object(N.a)(t,[{key:"getNodeById",value:(r=Object(u.a)(s.a.mark((function t(e){var r,n,a,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Math.floor(e/this.nodesPerPage),this.nodePages[r]){t.next=7;break}return a=Ge("".concat(this.tileset.url,"/nodepages/").concat(r),null===(n=this.options.i3s)||void 0===n?void 0:n.token),this.nodePages[r]=Object(M.a)(a,Tr,this.options),t.next=6,this.nodePages[r];case 6:this.nodePages[r]=t.sent;case 7:if(!(this.nodePages[r]instanceof Promise)){t.next=11;break}return t.next=10,this.nodePages[r];case 10:this.nodePages[r]=t.sent;case 11:return i=e%this.nodesPerPage,t.abrupt("return",this.nodePages[r].nodes[i]);case 13:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"formTileFromNodePages",value:(e=Object(u.a)(s.a.mark((function t(e){var r,n,a,i,o,c,u,l,f,d,_,h,p,S,y,v,b,E,m,R;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getNodeById(e);case 2:r=t.sent,n=[],a=Pr(r.children||[]),t.prev=5,a.s();case 7:if((i=a.n()).done){t.next=15;break}return o=i.value,t.next=11,this.getNodeById(o);case 11:c=t.sent,n.push({id:o,obb:c.obb});case 13:t.next=7;break;case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(5),a.e(t.t0);case 20:return t.prev=20,a.f(),t.finish(20);case 23:return u=null,l=null,f=null,d="jpeg",_=[],h=!1,r&&r.mesh&&(p=r.mesh.geometry&&this._getContentUrl(r.mesh.geometry)||{url:null,isDracoGeometry:null},S=p.url,y=p.isDracoGeometry,u=S,h=y,v=this._getInformationFromMaterial(r.mesh.material),b=Object(U.a)(v,2),E=b[0],m=b[1],f=m,d=E.format||d,E.name&&(l="".concat(this.tileset.url,"/nodes/").concat(r.mesh.material.resource,"/textures/").concat(E.name)),this.tileset.attributeStorageInfo&&(_=Ie(this.tileset,r.mesh.attribute.resource))),R=this._getLodSelection(r),t.abrupt("return",Ir({id:e,lodSelection:R,obb:r.obb,contentUrl:u,textureUrl:l,attributeUrls:_,materialDefinition:f,textureFormat:d,children:n,isDracoGeometry:h}));case 32:case"end":return t.stop()}}),t,this,[[5,17,20,23]])}))),function(t){return e.apply(this,arguments)})},{key:"_getContentUrl",value:function(t){var e={},r=this.tileset.geometryDefinitions[t.definition],n=-1;if(this.options.i3s&&this.options.i3s.useDracoGeometry&&(n=r.geometryBuffers.findIndex((function(t){return t.compressedAttributes&&"draco"===t.compressedAttributes.encoding}))),-1===n&&(n=r.geometryBuffers.findIndex((function(t){return!t.compressedAttributes}))),-1!==n){var a=Boolean(r.geometryBuffers[n].compressedAttributes);e={url:"".concat(this.tileset.url,"/nodes/").concat(t.resource,"/geometries/").concat(n),isDracoGeometry:a}}return e}},{key:"_getLodSelection",value:function(t){var e=[];return"maxScreenThresholdSQ"===this.lodSelectionMetricType&&e.push({metricType:"maxScreenThreshold",maxError:Math.sqrt(t.lodThreshold/(.25*Math.PI))}),e.push({metricType:this.lodSelectionMetricType,maxError:t.lodThreshold}),e}},{key:"_getInformationFromMaterial",value:function(t){var e={name:null,format:null};if(t){var r=this.tileset.materialDefinitions[t.definition],n=r&&r.pbrMetallicRoughness&&r.pbrMetallicRoughness.baseColorTexture&&r.pbrMetallicRoughness.baseColorTexture.textureSetDefinitionId;return n||0===n?[this.textureDefinitionsSelectedFormats[n]||e,r]:[e,r]}return[e,null]}},{key:"_initSelectedFormatsForTextureDefinitions",value:function(t){this.textureDefinitionsSelectedFormats=[];var e,r=this._getSupportedTextureFormats(),n=Pr(t.textureSetDefinitions||[]);try{for(n.s();!(e=n.n()).done;){var a,i=e.value,o=i&&i.formats||[],c=null,s=Pr(r);try{var u=function(){var t=a.value,e=o.find((function(e){return e.format===t}));if(e)return c=e,"break"};for(s.s();!(a=s.n()).done;){if("break"===u())break}}catch(l){s.e(l)}finally{s.f()}this.textureDefinitionsSelectedFormats.push(c)}}catch(l){n.e(l)}finally{n.f()}}},{key:"_getSupportedTextureFormats",value:function(){var t=[];if(!this.options.i3s||this.options.i3s.useCompressedTextures){var e=Or();e.has("etc2")&&t.push("ktx-etc2"),e.has("dxt")&&t.push("dds")}return t.push("jpg"),t.push("png"),t}}]),t}();function Gr(t,e,r){return t.url=r.url,t.featureData&&(t.featureUrl="".concat(t.url,"/").concat(t.featureData[0].href)),t.geometryData&&(t.contentUrl="".concat(t.url,"/").concat(t.geometryData[0].href)),t.textureData&&(t.textureUrl="".concat(t.url,"/").concat(t.textureData[0].href)),t.attributeData&&(t.attributeUrls=function(t){for(var e=t.url,r=t.attributeData,n=[],a=0;a<r.length;a++){var i=r[a].href.replace("./","");n.push("".concat(e,"/").concat(i))}return n}(t)),Ir(t)}function Ir(t){var e,r=t.obb?[].concat(Object(x.a)(j.a.WGS84.cartographicToCartesian(t.obb.center)),Object(x.a)(t.obb.halfSize),Object(x.a)(t.obb.quaternion)):void 0;if(t.mbs)e=[].concat(Object(x.a)(j.a.WGS84.cartographicToCartesian(t.mbs.slice(0,3))),[t.mbs[3]]);else if(r){var n=(new pr.d).fromCenterHalfSizeQuaternion(r.slice(0,3),t.obb.halfSize,t.obb.quaternion).getBoundingSphere();e=[].concat(Object(x.a)(n.center),[n.radius]),t.mbs=[].concat(Object(x.a)(t.obb.center),[n.radius])}return t.boundingVolume={sphere:e,box:r},t.lodMetricType=t.lodSelection[0].metricType,t.lodMetricValue=t.lodSelection[0].maxError,t.transformMatrix=t.transform,t.type=yr,t.refine=Sr,t}function Br(t,e,r){return jr.apply(this,arguments)}function jr(){return(jr=Object(u.a)(s.a.mark((function t(e,r,n){var a,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.url=n.url,!e.nodePages){t.next=8;break}return e.nodePagesTile=new Mr(e,r),t.next=5,e.nodePagesTile.formTileFromNodePages(0);case 5:e.root=t.sent,t.next=12;break;case 8:return i=Ge("".concat(e.url,"/nodes/root"),null===(a=r.i3s)||void 0===a?void 0:a.token),t.next=11,Object(M.a)(i,e.loader,{i3s:{loadContent:!1,isTileHeader:!0,isTileset:!1}});case 11:e.root=t.sent;case 12:e.basePath=e.url,e.type=vr,e.lodMetricType=e.root.lodMetricType,e.lodMetricValue=e.root.lodMetricValue;case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var kr=/layers\/[0-9]+$/,Hr=/nodes\/([0-9-]+|root)$/,Ur={name:"I3S (Indexed Scene Layers)",id:"i3s",module:"i3s",version:"3.0.12",mimeTypes:["application/octet-stream"],parse:function(t,e,r){return Lr.apply(this,arguments)},extensions:["bin"],options:{i3s:{loadContent:!0,token:null,isTileset:"auto",isTileHeader:"auto",tile:null,tileset:null,useDracoGeometry:!0,useCompressedTextures:!0}}};function Lr(){return(Lr=Object(u.a)(s.a.mark((function t(e,r,n){var a,i,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.url,r.i3s=r.i3s||{},"504b0304"!==Wr(e)){t.next=5;break}throw new Error("Files with .slpk extention currently are not supported by I3SLoader");case 5:if(i="auto"===r.i3s.isTileset?kr.test(a):r.i3s.isTileset,o="auto"===r.isTileHeader?Hr.test(a):r.i3s.isTileHeader,!i){t.next=13;break}return t.next=10,Xr(e,r,n);case 10:e=t.sent,t.next=26;break;case 13:if(!o){t.next=23;break}return t.next=16,zr(e,r,n);case 16:if(e=t.sent,!r.i3s.loadContent){t.next=21;break}return r.i3s.tile=e,t.next=21,Object(M.a)(e.contentUrl,Ur,r);case 21:t.next=26;break;case 23:return t.next=25,Nr(e,r);case 25:e=t.sent;case 26:return t.abrupt("return",e);case 27:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Nr(t,e){return Fr.apply(this,arguments)}function Fr(){return(Fr=Object(u.a)(s.a.mark((function t(e,r){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(G.a)(e,_r,r);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Xr(t,e,r){return Kr.apply(this,arguments)}function Kr(){return(Kr=Object(u.a)(s.a.mark((function t(e,r,n){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=JSON.parse((new TextDecoder).decode(e))).loader=Ur,t.next=4,Br(a,r,n);case 4:return t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function zr(t,e,r){return Vr.apply(this,arguments)}function Vr(){return(Vr=Object(u.a)(s.a.mark((function t(e,r,n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=JSON.parse((new TextDecoder).decode(e)),t.abrupt("return",Gr(e,0,n));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Wr(t){return t instanceof ArrayBuffer?Object(x.a)(new Uint8Array(t,0,4)).map((function(t){return t.toString(16).padStart(2,"0")})).join(""):null}var qr="https://tiles.arcgis.com/tiles/z2tnIkrLQ2BRzr6P/arcgis/rest/services/SanFrancisco_Bldgs/SceneServer/layers/0";function Qr(){return(Qr=Object(u.a)(s.a.mark((function t(e){var r,n,a,i,o,c,u,l;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C(["esri/Map","esri/views/SceneView","esri/views/3d/externalRenderers"]);case 2:return r=t.sent,n=r.DeckRenderer,a=r.modules,i=a[0],o=a[1],c=a[2],u=new o({container:e,qualityProfile:"high",map:new i({basemap:"dark-gray-vector"}),environment:{atmosphereEnabled:!1},camera:{position:{x:-122.4,y:37.78,z:3e3},heading:0,tilt:25},viewingMode:"local"}),l=new n(u,{}),c.add(u,l),u.on("layerview-create",(function(){l.deck.layers=[new w.a({id:"tile-3d-layer",data:qr,loader:Ur})]})),t.abrupt("return",{remove:function(){u.destroy(),l.dispose()}});case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Jr=r("CtqP"),Yr=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))||this)._containerRef=Object(a.createRef)(),e}Object(n.a)(e,t),e.renderInfo=function(t){return i.a.createElement("div",null,i.a.createElement("p",null,"Highly detailed LoD2 textured 3D buildings for downtown San Francisco in I3S format, visualized with deck.gl's Tile3DLayer. This data is provided by ",i.a.createElement("a",{href:"https://www.precisionlightworks.com/"},"Precision Light Works (PLW)"),"."),i.a.createElement("div",null,i.a.createElement("img",{src:"http://downloads.esri.com/blogs/arcgisonline/esrilogo_new.png",alt:"ESRI logo"}),i.a.createElement("a",{href:"https://www.arcgis.com/home/item.html?id=d3344ba99c3f4efaa909ccfbcc052ed5"},"Data profile page")))};var r=e.prototype;return r.componentDidMount=function(){var t=this,e=document.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("href","https://js.arcgis.com/4.16/esri/themes/light/main.css"),document.head.appendChild(e),function(t){return Qr.apply(this,arguments)}(this._containerRef.current).then((function(e){return t._view=e}))},r.componentWillUnmount=function(){this._view&&this._view.remove()},r.render=function(){return i.a.createElement("div",{ref:this._containerRef,style:{width:"100%",height:"100%"}})},e}(a.Component);Yr.title="San Francisco 3D Buildings",Yr.code=o.b+"/examples/website/i3s";e.default=Object(Jr.a)(Yr)},iJYz:function(t,e,r){!function(t){"use strict";var e={Promise:"undefined"!=typeof window?window.Promise:void 0};function r(t){if("next"===t.toLowerCase())return"next";var e=t&&t.match(/^(\d)\.(\d+)/);return e&&{major:parseInt(e[1],10),minor:parseInt(e[2],10)}}function n(t){return void 0===t&&(t="4.21"),"https://js.arcgis.com/"+t+"/"}function a(t){return!t||r(t)?function(t){void 0===t&&(t="4.21");var e=n(t),a=r(t);return"next"!==a&&3===a.major?e+(a.minor<=10?"js/":"")+"esri/css/esri.css":e+"esri/themes/light/main.css"}(t):t}function i(t,e){var r=a(t),n=function(t){return document.querySelector('link[href*="'+t+'"]')}(r);return n||function(t,e){if(e){var r=document.querySelector(e);r.parentNode.insertBefore(t,r)}else document.head.appendChild(t)}(n=function(t){var e=document.createElement("link");return e.rel="stylesheet",e.href=t,e}(r),e),n}var o={};function c(t,e,r){var n;r&&(n=function(t,e){var r=function r(n){e(n.error||new Error("There was an error attempting to load "+t.src)),t.removeEventListener("error",r,!1)};return t.addEventListener("error",r,!1),r}(t,r)),t.addEventListener("load",(function r(){e(t),t.removeEventListener("load",r,!1),n&&t.removeEventListener("error",n,!1)}),!1)}function s(){return document.querySelector("script[data-esri-loader]")}function u(){var t=window.require;return t&&t.on}function l(t){void 0===t&&(t={});var r={};[o,t].forEach((function(t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e])}));var a=r.version,l=r.url||n(a);return new e.Promise((function(t,e){var n=s();if(n){var o=n.getAttribute("src");o!==l?e(new Error("The ArcGIS API for JavaScript is already loaded ("+o+").")):u()?t(n):c(n,t,e)}else if(u())e(new Error("The ArcGIS API for JavaScript is already loaded."));else{var f=r.css;f&&i(!0===f?a:f,r.insertCssBefore),c(n=function(t){var e=document.createElement("script");return e.type="text/javascript",e.src=t,e.setAttribute("data-esri-loader","loading"),e}(l),(function(){n.setAttribute("data-esri-loader","loaded"),t(n)}),e),document.body.appendChild(n)}}))}function f(t){return new e.Promise((function(e,r){var n=window.require.on("error",r);window.require(t,(function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];n.remove(),e(t)}))}))}t.utils=e,t.loadModules=function(t,e){if(void 0===e&&(e={}),u())return f(t);var r=s(),n=r&&r.getAttribute("src");return!e.url&&n&&(e.url=n),l(e).then((function(){return f(t)}))},t.getScript=s,t.isLoaded=u,t.loadScript=l,t.setDefaultOptions=function(t){void 0===t&&(t={}),o=t},t.loadCss=i,Object.defineProperty(t,"__esModule",{value:!0})}(e)}}]);