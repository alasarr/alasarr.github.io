<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 2.32.0"/><title data-react-helmet="true">deck.gl | Performance Optimization</title><link data-react-helmet="true" rel="stylesheet" href="/deck.gl/styles.css" type="text/css"/><link data-react-helmet="true" rel="icon" type="img/ico" href="favicon.ico"/><meta data-react-helmet="true" name="description" content="WebGL-powered visualization framework for large-scale datasets"/><meta data-react-helmet="true" name="image" content="https://deck.gl/images/trips-layer-unfurl-4.0.jpg"/><meta data-react-helmet="true" property="og:url" content="https://deck.gl/*"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:title" content="deck.gl | Performance Optimization"/><meta data-react-helmet="true" property="og:description" content="WebGL-powered visualization framework for large-scale datasets"/><meta data-react-helmet="true" property="og:image" content="https://deck.gl/images/trips-layer-unfurl-4.0.jpg"/><meta data-react-helmet="true" property="fb:app_id" content=""/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:creator" content=""/><meta data-react-helmet="true" name="twitter:title" content="deck.gl | Performance Optimization"/><meta data-react-helmet="true" name="twitter:description" content="WebGL-powered visualization framework for large-scale datasets"/><meta data-react-helmet="true" name="twitter:image" content="https://deck.gl/images/trips-layer-unfurl-4.0.jpg"/><script data-react-helmet="true" type="application/ld+json">[{"@context":"http://schema.org","@type":"WebSite","url":"https://deck.gl","name":"deck.gl"},[{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://deck.gl/*","name":"deck.gl | Performance Optimization","image":"https://deck.gl/images/trips-layer-unfurl-4.0.jpg"}}]},{"@context":"http://schema.org","@type":"BlogPosting","url":"https://deck.gl","name":"deck.gl | Performance Optimization","headline":"deck.gl | Performance Optimization","image":{"@type":"ImageObject","url":"https://deck.gl/images/trips-layer-unfurl-4.0.jpg"},"description":"WebGL-powered visualization framework for large-scale datasets"}]]</script><script data-react-helmet="true" async="" src="https://www.googletagmanager.com/gtag/js?id=UA-74374017-2"></script><style data-styled="ckjqBY kTxBVF ffpMvA esBTyf gwvshP kGHZqi isdBno ljEIIX eFnCLU gGlvpi bfuDSM bYHnBw FcGip jlfDtm hVQsnM ccSUJg iVEvtf cVBvhK idNLwm iTIrjR dMTgn dvhuEd jYCwIr cncNYa gicMXt ePRhQs dMIfYV fjuJKd dMoEUD hsOfQe kVRSNy" data-styled-version="4.4.1">
/* sc-component-id: body__BodyContainerToC-lvm4v2-1 */
.idNLwm{height:100%;width:100%;padding:64px 0 0 300px;} @media screen and (max-width:768px){.idNLwm{height:calc(100vh - 64px);padding:0;-webkit-order:2;-ms-flex-order:2;order:2;}}
/* sc-component-id: body__Body-lvm4v2-3 */
.ckjqBY{font:normal 14px/20px UberMove,Helvetica,Arial,sans-serif;width:100vw;height:100vh;}
/* sc-component-id: toc__TocChevron-c2gnov-0 */
.isdBno{height:16px;width:16px;position:absolute;left:24px;top:20px;-webkit-transform:rotate(-90deg);-ms-transform:rotate(-90deg);transform:rotate(-90deg);-webkit-transition:-webkit-transform 0.3s;-webkit-transition:transform 0.3s;transition:transform 0.3s;}.ljEIIX{height:16px;width:16px;position:absolute;left:24px;top:20px;-webkit-transform:none;-ms-transform:none;transform:none;-webkit-transition:-webkit-transform 0.3s;-webkit-transition:transform 0.3s;transition:transform 0.3s;}.eFnCLU{height:16px;width:16px;position:absolute;left:36px;top:20px;-webkit-transform:none;-ms-transform:none;transform:none;-webkit-transition:-webkit-transform 0.3s;-webkit-transition:transform 0.3s;transition:transform 0.3s;}.gGlvpi{height:16px;width:16px;position:absolute;left:36px;top:20px;-webkit-transform:rotate(-90deg);-ms-transform:rotate(-90deg);transform:rotate(-90deg);-webkit-transition:-webkit-transform 0.3s;-webkit-transition:transform 0.3s;transition:transform 0.3s;}
/* sc-component-id: toc__TocEntry-c2gnov-1 */
.esBTyf{font:bold 14px/20px UberMove,Helvetica,Arial,sans-serif;border-top:1px solid tranparent;color:#19202C;cursor:pointer;margin:-0.5px 0;position:relative;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;}.gwvshP{font:bold 14px/20px UberMove,Helvetica,Arial,sans-serif;border-top:1px solid tranparent;color:#485668;cursor:pointer;margin:-0.5px 0;position:relative;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;}.kGHZqi{font:bold 14px/20px UberMove,Helvetica,Arial,sans-serif;border-top:1px solid #E1E8F0;color:#19202C;cursor:pointer;margin:-0.5px 0;position:relative;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;}
/* sc-component-id: toc__TocHeader-c2gnov-2 */
.bfuDSM{display:block;padding:16px 16px 16px 48px;} .bfuDSM:hover{background:#F7FAFC;}.bYHnBw{display:block;padding:16px 16px 16px 60px;} .bYHnBw:hover{background:#F7FAFC;}
/* sc-component-id: toc__TocLink-c2gnov-3 */
.ccSUJg a{display:block;padding:16px 16px 16px 60px;color:#485668 !important;-webkit-text-decoration:none;text-decoration:none;} .ccSUJg:hover{background:#F7FAFC;}.iVEvtf a{display:block;padding:16px 16px 16px 72px;color:#485668 !important;-webkit-text-decoration:none;text-decoration:none;} .iVEvtf:hover{background:#F7FAFC;}.cVBvhK a{display:block;padding:16px 16px 16px 72px;color:#00ADE6 !important;-webkit-text-decoration:none;text-decoration:none;} .cVBvhK:hover{background:#F7FAFC;}
/* sc-component-id: toc__TocSubpages-c2gnov-4 */
.FcGip{list-style:none;margin:0;max-height:0px;overflow:hidden;padding:0;-webkit-transition:max-height 0.3s;transition:max-height 0.3s;}.jlfDtm{list-style:none;margin:0;max-height:840px;overflow:hidden;padding:0;-webkit-transition:max-height 0.3s;transition:max-height 0.3s;}.hVQsnM{list-style:none;margin:0;max-height:728px;overflow:hidden;padding:0;-webkit-transition:max-height 0.3s;transition:max-height 0.3s;}
/* sc-component-id: toc__TocContainer-c2gnov-5 */
.ffpMvA{position:fixed;top:0;padding:64px 0;max-width:300px;height:100%;z-index:2;border-right:1px solid #CAD5E0;overflow-y:auto;overflow-x:hidden;width:100%;} @media screen and (max-width:768px){.ffpMvA{max-width:100%;height:initial;border-right:none;position:-webkit-sticky;position:sticky;padding:0;-webkit-transition:opacity 0.3s,-webkit-transform 0.3s;-webkit-transition:opacity 0.3s,transform 0.3s;transition:opacity 0.3s,transform 0.3s;opacity:0;max-height:0;overflow:hidden;-webkit-transform:translateY(30px);-ms-transform:translateY(30px);transform:translateY(30px);}}
/* sc-component-id: header__HeaderContainer-sc-3r2dxq-1 */
.kTxBVF{grid-column:1/3;grid-row:1/2;} @media screen and (max-width:768px){.kTxBVF{-webkit-order:1;-ms-flex-order:1;order:1;}}
/* sc-component-id: sc-global-3868639009 */
body{margin:0;overflow-x:hidden;-webkit-text-size-adjust:100%;} *{box-sizing:border-box;}
/* sc-component-id: typography__A-sc-1pmaksm-0 */
.dvhuEd{-webkit-text-decoration:none;text-decoration:none;color:#00ADE6;} .dvhuEd:visited{color:#174EB6;} .dvhuEd:active{color:#123D90;} .dvhuEd:hover{color:#123D90;}
/* sc-component-id: typography__GatsbyA-sc-1pmaksm-1 */
.dMoEUD{-webkit-text-decoration:none;text-decoration:none;color:#00ADE6;} .dMoEUD:visited{color:#174EB6;} .dMoEUD:active{color:#123D90;} .dMoEUD:hover{color:#123D90;}
/* sc-component-id: typography__H1-sc-1pmaksm-2 */
.dMTgn{font:bold 40px/56px UberMove,Helvetica,Arial,sans-serif;-webkit-letter-spacing:0.02em;-moz-letter-spacing:0.02em;-ms-letter-spacing:0.02em;letter-spacing:0.02em;margin:4px 0 24px;}
/* sc-component-id: typography__H2-sc-1pmaksm-3 */
.jYCwIr{font:bold 32px/48px UberMove,Helvetica,Arial,sans-serif;margin:24px 0 16px;}
/* sc-component-id: typography__H3-sc-1pmaksm-4 */
.ePRhQs{font:bold 24px/36px UberMove,Helvetica,Arial,sans-serif;}
/* sc-component-id: typography__H4-sc-1pmaksm-5 */
.dMIfYV{font:bold 20px/28px UberMove,Helvetica,Arial,sans-serif;}
/* sc-component-id: typography__P-sc-1pmaksm-8 */
.cncNYa{margin:'0 0 16px';}
/* sc-component-id: typography__List-sc-1pmaksm-9 */
.hsOfQe{margin:0 0 12px;}
/* sc-component-id: typography__ListItem-sc-1pmaksm-10 */
.kVRSNy{margin-bottom:4px;}
/* sc-component-id: typography__MarkdownBody-sc-1pmaksm-11 */
.iTIrjR{font:normal 14px/20px UberMove,Helvetica,Arial,sans-serif;padding:36px;max-width:692px;}
/* sc-component-id: typography__InlineCode-sc-1pmaksm-12 */
.gicMXt{background-color:#F7FAFC;border-radius:4px;padding:0 5px;font-family:Consolas,Menlo,Monaco,'Andale Mono WT','Andale Mono','Lucida Console','Lucida Sans Typewriter','DejaVu Sans Mono','Bitstream Vera Sans Mono','Liberation Mono','Nimbus Mono L','Courier New',Courier,monospace;font-size:0.9em;margin:1px 0;line-height:calc(1.5em / 0.9 - 2px);display:inline-block;vertical-align:top;}
/* sc-component-id: typography__Pre-sc-1pmaksm-14 */
.fjuJKd{font-size:14px;background-color:#F7FAFC;padding:6px;overflow-x:auto;} .fjuJKd .token.comment,.fjuJKd .token.prolog,.fjuJKd .token.doctype,.fjuJKd .token.cdata{color:slategray;} .fjuJKd .token.punctuation{color:#999;} .fjuJKd .token.namespace{opacity:.7;} .fjuJKd .token.property,.fjuJKd .token.tag,.fjuJKd .token.boolean,.fjuJKd .token.number,.fjuJKd .token.constant,.fjuJKd .token.symbol,.fjuJKd .token.deleted{color:#905;} .fjuJKd .token.selector,.fjuJKd .token.attr-name,.fjuJKd .token.string,.fjuJKd .token.char,.fjuJKd .token.builtin,.fjuJKd .token.inserted{color:#690;} .fjuJKd .token.operator,.fjuJKd .token.entity,.fjuJKd .token.url,.fjuJKd .language-css .token.string,.fjuJKd .style .token.string{color:#9a6e3a;background:hsla(0,0%,100%,.5);} .fjuJKd .token.atrule,.fjuJKd .token.attr-value,.fjuJKd .token.keyword{color:#07a;} .fjuJKd .token.function,.fjuJKd .token.class-name{color:#DD4A68;} .fjuJKd .token.regex,.fjuJKd .token.important,.fjuJKd .token.variable{color:#e90;} .fjuJKd .token.important,.fjuJKd .token.bold{font-weight:bold;} .fjuJKd .token.italic{font-style:italic;} .fjuJKd .token.entity{cursor:help;}</style><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 64)
          }), 0)
        }
      }
    })
  </script><link as="script" rel="preload" href="/deck.gl/webpack-runtime-ac97f0dd661c36ee129d.js"/><link as="script" rel="preload" href="/deck.gl/framework-a5153769f2c95affa126.js"/><link as="script" rel="preload" href="/deck.gl/2d7ef48f-f748d0e17429148f6483.js"/><link as="script" rel="preload" href="/deck.gl/fe95a7ce-dbeb3f898ac885544664.js"/><link as="script" rel="preload" href="/deck.gl/app-9d5aa6e835da781ed375.js"/><link as="script" rel="preload" href="/deck.gl/component---node-modules-gatsby-theme-ocular-src-react-templates-documentation-jsx-b5c6fcc0e706ecb665be.js"/><link as="fetch" rel="preload" href="/deck.gl/page-data/docs/developer-guide/performance/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/deck.gl/page-data/sq/d/484347790.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/deck.gl/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div><div class="body__Body-lvm4v2-3 ckjqBY"><div class="header__HeaderContainer-sc-3r2dxq-1 kTxBVF"><div></div></div><div class="toc__TocContainer-c2gnov-5 ffpMvA"><div><div title="Overview" class="toc__TocEntry-c2gnov-1 esBTyf"><svg viewBox="0 0 24 24" class="toc__TocChevron-c2gnov-0 isdBno" width="24" height="24"><title>Chevron Down</title><path transform="rotate(270, 12, 12)" fill-rule="evenodd" clip-rule="evenodd" d="M9 12C9 12.2652 9.10536 12.5196 9.29289 12.7071L13.2929 16.7071C13.6834 17.0976 14.3166 17.0976 14.7071 16.7071C15.0976 16.3166 15.0976 15.6834 14.7071 15.2929L11.4142 12L14.7071 8.70711C15.0976 8.31658 15.0976 7.68342 14.7071 7.29289C14.3166 6.90237 13.6834 6.90237 13.2929 7.29289L9.29289 11.2929C9.10536 11.4804 9 11.7348 9 12Z"></path></svg><span class="toc__TocHeader-c2gnov-2 bfuDSM">Overview</span></div><ul class="toc__TocSubpages-c2gnov-4 FcGip"><div><li><div title="Introduction" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 ccSUJg"><a title="Introduction" href="/deck.gl/docs">Introduction</a></div></div></li></div><div><li><div title="What&#x27;s New" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 ccSUJg"><a title="What&#x27;s New" href="/deck.gl/docs/whats-new">What&#x27;s New</a></div></div></li></div><div><li><div title="Upgrade Guide" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 ccSUJg"><a title="Upgrade Guide" href="/deck.gl/docs/upgrade-guide">Upgrade Guide</a></div></div></li></div><div><li><div title="Contributing to deck.gl" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 ccSUJg"><a title="Contributing to deck.gl" href="/deck.gl/docs/contributing">Contributing to deck.gl</a></div></div></li></div><div><li><div title="Frequently Asked Questions" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 ccSUJg"><a title="Frequently Asked Questions" href="/deck.gl/docs/faq">Frequently Asked Questions</a></div></div></li></div></ul></div><div><div title="Getting Started" class="toc__TocEntry-c2gnov-1 kGHZqi"><svg viewBox="0 0 24 24" class="toc__TocChevron-c2gnov-0 isdBno" width="24" height="24"><title>Chevron Down</title><path transform="rotate(270, 12, 12)" fill-rule="evenodd" clip-rule="evenodd" d="M9 12C9 12.2652 9.10536 12.5196 9.29289 12.7071L13.2929 16.7071C13.6834 17.0976 14.3166 17.0976 14.7071 16.7071C15.0976 16.3166 15.0976 15.6834 14.7071 15.2929L11.4142 12L14.7071 8.70711C15.0976 8.31658 15.0976 7.68342 14.7071 7.29289C14.3166 6.90237 13.6834 6.90237 13.2929 7.29289L9.29289 11.2929C9.10536 11.4804 9 11.7348 9 12Z"></path></svg><span class="toc__TocHeader-c2gnov-2 bfuDSM">Getting Started</span></div><ul class="toc__TocSubpages-c2gnov-4 FcGip"><div><li><div title="Installing and Running Examples" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 ccSUJg"><a title="Installing and Running Examples" href="/deck.gl/docs/get-started/getting-started">Installing and Running Examples</a></div></div></li></div><div><li><div title="Using deck.gl without React" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 ccSUJg"><a title="Using deck.gl without React" href="/deck.gl/docs/get-started/using-standalone">Using deck.gl without React</a></div></div></li></div><div><li><div title="Using deck.gl with React" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 ccSUJg"><a title="Using deck.gl with React" href="/deck.gl/docs/get-started/using-with-react">Using deck.gl with React</a></div></div></li></div><div><li><div title="Using deck.gl with a Base Map" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 ccSUJg"><a title="Using deck.gl with a Base Map" href="/deck.gl/docs/get-started/using-with-map">Using deck.gl with a Base Map</a></div></div></li></div><div><li><div title="Learning Resources" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 ccSUJg"><a title="Learning Resources" href="/deck.gl/docs/get-started/learning-resources">Learning Resources</a></div></div></li></div></ul></div><div><div title="Developer Guide" class="toc__TocEntry-c2gnov-1 kGHZqi"><svg viewBox="0 0 24 24" class="toc__TocChevron-c2gnov-0 ljEIIX" width="24" height="24"><title>Chevron Down</title><path transform="rotate(270, 12, 12)" fill-rule="evenodd" clip-rule="evenodd" d="M9 12C9 12.2652 9.10536 12.5196 9.29289 12.7071L13.2929 16.7071C13.6834 17.0976 14.3166 17.0976 14.7071 16.7071C15.0976 16.3166 15.0976 15.6834 14.7071 15.2929L11.4142 12L14.7071 8.70711C15.0976 8.31658 15.0976 7.68342 14.7071 7.29289C14.3166 6.90237 13.6834 6.90237 13.2929 7.29289L9.29289 11.2929C9.10536 11.4804 9 11.7348 9 12Z"></path></svg><span class="toc__TocHeader-c2gnov-2 bfuDSM">Developer Guide</span></div><ul class="toc__TocSubpages-c2gnov-4 jlfDtm"><div><div title="Using the API" class="toc__TocEntry-c2gnov-1 gwvshP"><svg viewBox="0 0 24 24" class="toc__TocChevron-c2gnov-0 eFnCLU" width="24" height="24"><title>Chevron Down</title><path transform="rotate(270, 12, 12)" fill-rule="evenodd" clip-rule="evenodd" d="M9 12C9 12.2652 9.10536 12.5196 9.29289 12.7071L13.2929 16.7071C13.6834 17.0976 14.3166 17.0976 14.7071 16.7071C15.0976 16.3166 15.0976 15.6834 14.7071 15.2929L11.4142 12L14.7071 8.70711C15.0976 8.31658 15.0976 7.68342 14.7071 7.29289C14.3166 6.90237 13.6834 6.90237 13.2929 7.29289L9.29289 11.2929C9.10536 11.4804 9 11.7348 9 12Z"></path></svg><span class="toc__TocHeader-c2gnov-2 bYHnBw">Using the API</span></div><ul class="toc__TocSubpages-c2gnov-4 hVQsnM"><div><li><div title="Using Layers" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="Using Layers" href="/deck.gl/docs/developer-guide/using-layers">Using Layers</a></div></div></li></div><div><li><div title="Adding Interactivity" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="Adding Interactivity" href="/deck.gl/docs/developer-guide/interactivity">Adding Interactivity</a></div></div></li></div><div><li><div title="Coordinate Systems" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="Coordinate Systems" href="/deck.gl/docs/developer-guide/coordinate-systems">Coordinate Systems</a></div></div></li></div><div><li><div title="Views and Projections" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="Views and Projections" href="/deck.gl/docs/developer-guide/views">Views and Projections</a></div></div></li></div><div><li><div title="View State Transitions" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="View State Transitions" href="/deck.gl/docs/developer-guide/view-state-transitions">View State Transitions</a></div></div></li></div><div><li><div title="Loading Data" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="Loading Data" href="/deck.gl/docs/developer-guide/loading-data">Loading Data</a></div></div></li></div><div><li><div title="Using Lighting" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="Using Lighting" href="/deck.gl/docs/developer-guide/using-lighting">Using Lighting</a></div></div></li></div><div><li><div title="Performance Optimization" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 cVBvhK"><a aria-current="page" title="Performance Optimization" class="" href="/deck.gl/docs/developer-guide/performance">Performance Optimization</a></div></div></li></div><div><li><div title="About 64-bit Layers" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="About 64-bit Layers" href="/deck.gl/docs/developer-guide/64-bits">About 64-bit Layers</a></div></div></li></div><div><li><div title="Tips and Tricks" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="Tips and Tricks" href="/deck.gl/docs/developer-guide/tips-and-tricks">Tips and Tricks</a></div></div></li></div><div><li><div title="Building Apps" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="Building Apps" href="/deck.gl/docs/developer-guide/building-apps">Building Apps</a></div></div></li></div><div><li><div title="Debugging" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="Debugging" href="/deck.gl/docs/developer-guide/debugging">Debugging</a></div></div></li></div><div><li><div title="Testing Layers and Applications" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="Testing Layers and Applications" href="/deck.gl/docs/developer-guide/testing">Testing Layers and Applications</a></div></div></li></div></ul></div><div><div title="Writing Custom Layers" class="toc__TocEntry-c2gnov-1 gwvshP"><svg viewBox="0 0 24 24" class="toc__TocChevron-c2gnov-0 gGlvpi" width="24" height="24"><title>Chevron Down</title><path transform="rotate(270, 12, 12)" fill-rule="evenodd" clip-rule="evenodd" d="M9 12C9 12.2652 9.10536 12.5196 9.29289 12.7071L13.2929 16.7071C13.6834 17.0976 14.3166 17.0976 14.7071 16.7071C15.0976 16.3166 15.0976 15.6834 14.7071 15.2929L11.4142 12L14.7071 8.70711C15.0976 8.31658 15.0976 7.68342 14.7071 7.29289C14.3166 6.90237 13.6834 6.90237 13.2929 7.29289L9.29289 11.2929C9.10536 11.4804 9 11.7348 9 12Z"></path></svg><span class="toc__TocHeader-c2gnov-2 bYHnBw">Writing Custom Layers</span></div><ul class="toc__TocSubpages-c2gnov-4 FcGip"><div><li><div title="Writing Your Own Layer" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="Writing Your Own Layer" href="/deck.gl/docs/developer-guide/custom-layers">Writing Your Own Layer</a></div></div></li></div><div><li><div title="Layer Lifecycle" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="Layer Lifecycle" href="/deck.gl/docs/developer-guide/custom-layers/layer-lifecycle">Layer Lifecycle</a></div></div></li></div><div><li><div title="Picking" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="Picking" href="/deck.gl/docs/developer-guide/custom-layers/picking">Picking</a></div></div></li></div><div><li><div title="Composite Layers" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="Composite Layers" href="/deck.gl/docs/developer-guide/custom-layers/composite-layers">Composite Layers</a></div></div></li></div><div><li><div title="Subclassed Layers" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="Subclassed Layers" href="/deck.gl/docs/developer-guide/custom-layers/subclassed-layers">Subclassed Layers</a></div></div></li></div><div><li><div title="Primitive Layers" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="Primitive Layers" href="/deck.gl/docs/developer-guide/custom-layers/primitive-layers">Primitive Layers</a></div></div></li></div><div><li><div title="Property Types" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="Property Types" href="/deck.gl/docs/developer-guide/custom-layers/prop-types">Property Types</a></div></div></li></div><div><li><div title="Attribute Management" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="Attribute Management" href="/deck.gl/docs/developer-guide/custom-layers/attribute-management">Attribute Management</a></div></div></li></div><div><li><div title="Writing Shaders" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="Writing Shaders" href="/deck.gl/docs/developer-guide/custom-layers/writing-shaders">Writing Shaders</a></div></div></li></div></ul></div></ul></div><div><div title="API Reference" class="toc__TocEntry-c2gnov-1 kGHZqi"><svg viewBox="0 0 24 24" class="toc__TocChevron-c2gnov-0 isdBno" width="24" height="24"><title>Chevron Down</title><path transform="rotate(270, 12, 12)" fill-rule="evenodd" clip-rule="evenodd" d="M9 12C9 12.2652 9.10536 12.5196 9.29289 12.7071L13.2929 16.7071C13.6834 17.0976 14.3166 17.0976 14.7071 16.7071C15.0976 16.3166 15.0976 15.6834 14.7071 15.2929L11.4142 12L14.7071 8.70711C15.0976 8.31658 15.0976 7.68342 14.7071 7.29289C14.3166 6.90237 13.6834 6.90237 13.2929 7.29289L9.29289 11.2929C9.10536 11.4804 9 11.7348 9 12Z"></path></svg><span class="toc__TocHeader-c2gnov-2 bfuDSM">API Reference</span></div><ul class="toc__TocSubpages-c2gnov-4 FcGip"><div><div title="Core Classes" class="toc__TocEntry-c2gnov-1 gwvshP"><svg viewBox="0 0 24 24" class="toc__TocChevron-c2gnov-0 gGlvpi" width="24" height="24"><title>Chevron Down</title><path transform="rotate(270, 12, 12)" fill-rule="evenodd" clip-rule="evenodd" d="M9 12C9 12.2652 9.10536 12.5196 9.29289 12.7071L13.2929 16.7071C13.6834 17.0976 14.3166 17.0976 14.7071 16.7071C15.0976 16.3166 15.0976 15.6834 14.7071 15.2929L11.4142 12L14.7071 8.70711C15.0976 8.31658 15.0976 7.68342 14.7071 7.29289C14.3166 6.90237 13.6834 6.90237 13.2929 7.29289L9.29289 11.2929C9.10536 11.4804 9 11.7348 9 12Z"></path></svg><span class="toc__TocHeader-c2gnov-2 bYHnBw">Core Classes</span></div><ul class="toc__TocSubpages-c2gnov-4 FcGip"><div><li><div title="Deck" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="Deck" href="/deck.gl/docs/api-reference/core/deck">Deck</a></div></div></li></div><div><li><div title="AttributeManager" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="AttributeManager" href="/deck.gl/docs/api-reference/core/attribute-manager">AttributeManager</a></div></div></li></div></ul></div><div><div title="Layers" class="toc__TocEntry-c2gnov-1 gwvshP"><svg viewBox="0 0 24 24" class="toc__TocChevron-c2gnov-0 gGlvpi" width="24" height="24"><title>Chevron Down</title><path transform="rotate(270, 12, 12)" fill-rule="evenodd" clip-rule="evenodd" d="M9 12C9 12.2652 9.10536 12.5196 9.29289 12.7071L13.2929 16.7071C13.6834 17.0976 14.3166 17.0976 14.7071 16.7071C15.0976 16.3166 15.0976 15.6834 14.7071 15.2929L11.4142 12L14.7071 8.70711C15.0976 8.31658 15.0976 7.68342 14.7071 7.29289C14.3166 6.90237 13.6834 6.90237 13.2929 7.29289L9.29289 11.2929C9.10536 11.4804 9 11.7348 9 12Z"></path></svg><span class="toc__TocHeader-c2gnov-2 bYHnBw">Layers</span></div><ul class="toc__TocSubpages-c2gnov-4 FcGip"><div><li><div title="Layer Catalog Overview" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="Layer Catalog Overview" href="/deck.gl/docs/api-reference/layers">Layer Catalog Overview</a></div></div></li></div><div><li><div title="Layer Class" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="Layer Class" href="/deck.gl/docs/api-reference/core/layer">Layer Class</a></div></div></li></div><div><li><div title="CompositeLayer Class" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="CompositeLayer Class" href="/deck.gl/docs/api-reference/core/composite-layer">CompositeLayer Class</a></div></div></li></div><div><li><div title="ArcLayer" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="ArcLayer" href="/deck.gl/docs/api-reference/layers/arc-layer">ArcLayer</a></div></div></li></div><div><li><div title="BitmapLayer" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="BitmapLayer" href="/deck.gl/docs/api-reference/layers/bitmap-layer">BitmapLayer</a></div></div></li></div><div><li><div title="ColumnLayer" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="ColumnLayer" href="/deck.gl/docs/api-reference/layers/column-layer">ColumnLayer</a></div></div></li></div><div><li><div title="CPUGridLayer" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="CPUGridLayer" href="/deck.gl/docs/api-reference/aggregation-layers/cpu-grid-layer">CPUGridLayer</a></div></div></li></div><div><li><div title="ContourLayer" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="ContourLayer" href="/deck.gl/docs/api-reference/aggregation-layers/contour-layer">ContourLayer</a></div></div></li></div><div><li><div title="GeoJsonLayer" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="GeoJsonLayer" href="/deck.gl/docs/api-reference/layers/geojson-layer">GeoJsonLayer</a></div></div></li></div><div><li><div title="GPUGridLayer (WebGL2)" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="GPUGridLayer (WebGL2)" href="/deck.gl/docs/api-reference/aggregation-layers/gpu-grid-layer">GPUGridLayer (WebGL2)</a></div></div></li></div><div><li><div title="GreatCircleLayer" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="GreatCircleLayer" href="/deck.gl/docs/api-reference/geo-layers/great-circle-layer">GreatCircleLayer</a></div></div></li></div><div><li><div title="GridCellLayer" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="GridCellLayer" href="/deck.gl/docs/api-reference/layers/grid-cell-layer">GridCellLayer</a></div></div></li></div><div><li><div title="GridLayer" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="GridLayer" href="/deck.gl/docs/api-reference/aggregation-layers/grid-layer">GridLayer</a></div></div></li></div><div><li><div title="H3ClusterLayer" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="H3ClusterLayer" href="/deck.gl/docs/api-reference/geo-layers/h3-cluster-layer">H3ClusterLayer</a></div></div></li></div><div><li><div title="H3HexagonLayer" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="H3HexagonLayer" href="/deck.gl/docs/api-reference/geo-layers/h3-hexagon-layer">H3HexagonLayer</a></div></div></li></div><div><li><div title="HeatmapLayer" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="HeatmapLayer" href="/deck.gl/docs/api-reference/aggregation-layers/heatmap-layer">HeatmapLayer</a></div></div></li></div><div><li><div title="HexagonLayer" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="HexagonLayer" href="/deck.gl/docs/api-reference/aggregation-layers/hexagon-layer">HexagonLayer</a></div></div></li></div><div><li><div title="IconLayer" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="IconLayer" href="/deck.gl/docs/api-reference/layers/icon-layer">IconLayer</a></div></div></li></div><div><li><div title="LineLayer" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="LineLayer" href="/deck.gl/docs/api-reference/layers/line-layer">LineLayer</a></div></div></li></div><div><li><div title="MVTLayer" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="MVTLayer" href="/deck.gl/docs/api-reference/geo-layers/mvt-layer">MVTLayer</a></div></div></li></div><div><li><div title="PathLayer" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="PathLayer" href="/deck.gl/docs/api-reference/layers/path-layer">PathLayer</a></div></div></li></div><div><li><div title="PointCloudLayer" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="PointCloudLayer" href="/deck.gl/docs/api-reference/layers/point-cloud-layer">PointCloudLayer</a></div></div></li></div><div><li><div title="PolygonLayer" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="PolygonLayer" href="/deck.gl/docs/api-reference/layers/polygon-layer">PolygonLayer</a></div></div></li></div><div><li><div title="S2Layer" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="S2Layer" href="/deck.gl/docs/api-reference/geo-layers/s2-layer">S2Layer</a></div></div></li></div><div><li><div title="ScatterplotLayer" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="ScatterplotLayer" href="/deck.gl/docs/api-reference/layers/scatterplot-layer">ScatterplotLayer</a></div></div></li></div><div><li><div title="ScenegraphLayer" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="ScenegraphLayer" href="/deck.gl/docs/api-reference/mesh-layers/scenegraph-layer">ScenegraphLayer</a></div></div></li></div><div><li><div title="ScreenGridLayer" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="ScreenGridLayer" href="/deck.gl/docs/api-reference/aggregation-layers/screen-grid-layer">ScreenGridLayer</a></div></div></li></div><div><li><div title="SimpleMeshLayer" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="SimpleMeshLayer" href="/deck.gl/docs/api-reference/mesh-layers/simple-mesh-layer">SimpleMeshLayer</a></div></div></li></div><div><li><div title="SolidPolygonLayer" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="SolidPolygonLayer" href="/deck.gl/docs/api-reference/layers/solid-polygon-layer">SolidPolygonLayer</a></div></div></li></div><div><li><div title="TerrainLayer" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="TerrainLayer" href="/deck.gl/docs/api-reference/geo-layers/terrain-layer">TerrainLayer</a></div></div></li></div><div><li><div title="TextLayer" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="TextLayer" href="/deck.gl/docs/api-reference/layers/text-layer">TextLayer</a></div></div></li></div><div><li><div title="TileLayer" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="TileLayer" href="/deck.gl/docs/api-reference/geo-layers/tile-layer">TileLayer</a></div></div></li></div><div><li><div title="Tile3DLayer (Experimental)" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="Tile3DLayer (Experimental)" href="/deck.gl/docs/api-reference/geo-layers/tile-3d-layer">Tile3DLayer (Experimental)</a></div></div></li></div><div><li><div title="Trips Layer" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="Trips Layer" href="/deck.gl/docs/api-reference/geo-layers/trips-layer">Trips Layer</a></div></div></li></div></ul></div><div><div title="Scripting Interface" class="toc__TocEntry-c2gnov-1 gwvshP"><svg viewBox="0 0 24 24" class="toc__TocChevron-c2gnov-0 gGlvpi" width="24" height="24"><title>Chevron Down</title><path transform="rotate(270, 12, 12)" fill-rule="evenodd" clip-rule="evenodd" d="M9 12C9 12.2652 9.10536 12.5196 9.29289 12.7071L13.2929 16.7071C13.6834 17.0976 14.3166 17.0976 14.7071 16.7071C15.0976 16.3166 15.0976 15.6834 14.7071 15.2929L11.4142 12L14.7071 8.70711C15.0976 8.31658 15.0976 7.68342 14.7071 7.29289C14.3166 6.90237 13.6834 6.90237 13.2929 7.29289L9.29289 11.2929C9.10536 11.4804 9 11.7348 9 12Z"></path></svg><span class="toc__TocHeader-c2gnov-2 bYHnBw">Scripting Interface</span></div><ul class="toc__TocSubpages-c2gnov-4 FcGip"><div><li><div title="DeckGL (Scripting Interface)" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="DeckGL (Scripting Interface)" href="/deck.gl/docs/api-reference/core/deckgl">DeckGL (Scripting Interface)</a></div></div></li></div></ul></div><div><div title="Shader Modules" class="toc__TocEntry-c2gnov-1 gwvshP"><svg viewBox="0 0 24 24" class="toc__TocChevron-c2gnov-0 gGlvpi" width="24" height="24"><title>Chevron Down</title><path transform="rotate(270, 12, 12)" fill-rule="evenodd" clip-rule="evenodd" d="M9 12C9 12.2652 9.10536 12.5196 9.29289 12.7071L13.2929 16.7071C13.6834 17.0976 14.3166 17.0976 14.7071 16.7071C15.0976 16.3166 15.0976 15.6834 14.7071 15.2929L11.4142 12L14.7071 8.70711C15.0976 8.31658 15.0976 7.68342 14.7071 7.29289C14.3166 6.90237 13.6834 6.90237 13.2929 7.29289L9.29289 11.2929C9.10536 11.4804 9 11.7348 9 12Z"></path></svg><span class="toc__TocHeader-c2gnov-2 bYHnBw">Shader Modules</span></div><ul class="toc__TocSubpages-c2gnov-4 FcGip"><div><li><div title="project (Shader Module)" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="project (Shader Module)" href="/deck.gl/docs/api-reference/core/project">project (Shader Module)</a></div></div></li></div><div><li><div title="project32 (Shader Module)" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="project32 (Shader Module)" href="/deck.gl/docs/api-reference/core/project32">project32 (Shader Module)</a></div></div></li></div><div><li><div title="project64 (Shader Module)" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="project64 (Shader Module)" href="/deck.gl/docs/api-reference/core/project64">project64 (Shader Module)</a></div></div></li></div></ul></div><div><div title="Viewports" class="toc__TocEntry-c2gnov-1 gwvshP"><svg viewBox="0 0 24 24" class="toc__TocChevron-c2gnov-0 gGlvpi" width="24" height="24"><title>Chevron Down</title><path transform="rotate(270, 12, 12)" fill-rule="evenodd" clip-rule="evenodd" d="M9 12C9 12.2652 9.10536 12.5196 9.29289 12.7071L13.2929 16.7071C13.6834 17.0976 14.3166 17.0976 14.7071 16.7071C15.0976 16.3166 15.0976 15.6834 14.7071 15.2929L11.4142 12L14.7071 8.70711C15.0976 8.31658 15.0976 7.68342 14.7071 7.29289C14.3166 6.90237 13.6834 6.90237 13.2929 7.29289L9.29289 11.2929C9.10536 11.4804 9 11.7348 9 12Z"></path></svg><span class="toc__TocHeader-c2gnov-2 bYHnBw">Viewports</span></div><ul class="toc__TocSubpages-c2gnov-4 FcGip"><div><li><div title="Viewport" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="Viewport" href="/deck.gl/docs/api-reference/core/viewport">Viewport</a></div></div></li></div><div><li><div title="GlobeViewport (Experimental)" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="GlobeViewport (Experimental)" href="/deck.gl/docs/api-reference/core/globe-viewport">GlobeViewport (Experimental)</a></div></div></li></div><div><li><div title="WebMercatorViewport" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="WebMercatorViewport" href="/deck.gl/docs/api-reference/core/web-mercator-viewport">WebMercatorViewport</a></div></div></li></div></ul></div><div><div title="Views" class="toc__TocEntry-c2gnov-1 gwvshP"><svg viewBox="0 0 24 24" class="toc__TocChevron-c2gnov-0 gGlvpi" width="24" height="24"><title>Chevron Down</title><path transform="rotate(270, 12, 12)" fill-rule="evenodd" clip-rule="evenodd" d="M9 12C9 12.2652 9.10536 12.5196 9.29289 12.7071L13.2929 16.7071C13.6834 17.0976 14.3166 17.0976 14.7071 16.7071C15.0976 16.3166 15.0976 15.6834 14.7071 15.2929L11.4142 12L14.7071 8.70711C15.0976 8.31658 15.0976 7.68342 14.7071 7.29289C14.3166 6.90237 13.6834 6.90237 13.2929 7.29289L9.29289 11.2929C9.10536 11.4804 9 11.7348 9 12Z"></path></svg><span class="toc__TocHeader-c2gnov-2 bYHnBw">Views</span></div><ul class="toc__TocSubpages-c2gnov-4 FcGip"><div><li><div title="View Class" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="View Class" href="/deck.gl/docs/api-reference/core/view">View Class</a></div></div></li></div><div><li><div title="MapView" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="MapView" href="/deck.gl/docs/api-reference/core/map-view">MapView</a></div></div></li></div><div><li><div title="GlobeView (Experimental)" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="GlobeView (Experimental)" href="/deck.gl/docs/api-reference/core/globe-view">GlobeView (Experimental)</a></div></div></li></div><div><li><div title="FirstPersonView" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="FirstPersonView" href="/deck.gl/docs/api-reference/core/first-person-view">FirstPersonView</a></div></div></li></div><div><li><div title="OrthographicView" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="OrthographicView" href="/deck.gl/docs/api-reference/core/orthographic-view">OrthographicView</a></div></div></li></div><div><li><div title="OrbitView" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="OrbitView" href="/deck.gl/docs/api-reference/core/orbit-view">OrbitView</a></div></div></li></div></ul></div><div><div title="Controllers" class="toc__TocEntry-c2gnov-1 gwvshP"><svg viewBox="0 0 24 24" class="toc__TocChevron-c2gnov-0 gGlvpi" width="24" height="24"><title>Chevron Down</title><path transform="rotate(270, 12, 12)" fill-rule="evenodd" clip-rule="evenodd" d="M9 12C9 12.2652 9.10536 12.5196 9.29289 12.7071L13.2929 16.7071C13.6834 17.0976 14.3166 17.0976 14.7071 16.7071C15.0976 16.3166 15.0976 15.6834 14.7071 15.2929L11.4142 12L14.7071 8.70711C15.0976 8.31658 15.0976 7.68342 14.7071 7.29289C14.3166 6.90237 13.6834 6.90237 13.2929 7.29289L9.29289 11.2929C9.10536 11.4804 9 11.7348 9 12Z"></path></svg><span class="toc__TocHeader-c2gnov-2 bYHnBw">Controllers</span></div><ul class="toc__TocSubpages-c2gnov-4 FcGip"><div><li><div title="Controller" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="Controller" href="/deck.gl/docs/api-reference/core/controller">Controller</a></div></div></li></div><div><li><div title="MapController" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="MapController" href="/deck.gl/docs/api-reference/core/map-controller">MapController</a></div></div></li></div><div><li><div title="GlobeController (Experimental)" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="GlobeController (Experimental)" href="/deck.gl/docs/api-reference/core/globe-controller">GlobeController (Experimental)</a></div></div></li></div><div><li><div title="FirstPersonController" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="FirstPersonController" href="/deck.gl/docs/api-reference/core/first-person-controller">FirstPersonController</a></div></div></li></div><div><li><div title="OrthographicController" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="OrthographicController" href="/deck.gl/docs/api-reference/core/orthographic-controller">OrthographicController</a></div></div></li></div><div><li><div title="OrbitController" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="OrbitController" href="/deck.gl/docs/api-reference/core/orbit-controller">OrbitController</a></div></div></li></div></ul></div><div><div title="Transitions" class="toc__TocEntry-c2gnov-1 gwvshP"><svg viewBox="0 0 24 24" class="toc__TocChevron-c2gnov-0 gGlvpi" width="24" height="24"><title>Chevron Down</title><path transform="rotate(270, 12, 12)" fill-rule="evenodd" clip-rule="evenodd" d="M9 12C9 12.2652 9.10536 12.5196 9.29289 12.7071L13.2929 16.7071C13.6834 17.0976 14.3166 17.0976 14.7071 16.7071C15.0976 16.3166 15.0976 15.6834 14.7071 15.2929L11.4142 12L14.7071 8.70711C15.0976 8.31658 15.0976 7.68342 14.7071 7.29289C14.3166 6.90237 13.6834 6.90237 13.2929 7.29289L9.29289 11.2929C9.10536 11.4804 9 11.7348 9 12Z"></path></svg><span class="toc__TocHeader-c2gnov-2 bYHnBw">Transitions</span></div><ul class="toc__TocSubpages-c2gnov-4 FcGip"><div><li><div title="LinearInterpolator" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="LinearInterpolator" href="/deck.gl/docs/api-reference/core/linear-interpolator">LinearInterpolator</a></div></div></li></div><div><li><div title="FlyToInterpolator" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="FlyToInterpolator" href="/deck.gl/docs/api-reference/core/fly-to-interpolator">FlyToInterpolator</a></div></div></li></div><div><li><div title="TransitionInterpolator" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="TransitionInterpolator" href="/deck.gl/docs/api-reference/core/transition-interpolator">TransitionInterpolator</a></div></div></li></div></ul></div><div><div title="Effects" class="toc__TocEntry-c2gnov-1 gwvshP"><svg viewBox="0 0 24 24" class="toc__TocChevron-c2gnov-0 gGlvpi" width="24" height="24"><title>Chevron Down</title><path transform="rotate(270, 12, 12)" fill-rule="evenodd" clip-rule="evenodd" d="M9 12C9 12.2652 9.10536 12.5196 9.29289 12.7071L13.2929 16.7071C13.6834 17.0976 14.3166 17.0976 14.7071 16.7071C15.0976 16.3166 15.0976 15.6834 14.7071 15.2929L11.4142 12L14.7071 8.70711C15.0976 8.31658 15.0976 7.68342 14.7071 7.29289C14.3166 6.90237 13.6834 6.90237 13.2929 7.29289L9.29289 11.2929C9.10536 11.4804 9 11.7348 9 12Z"></path></svg><span class="toc__TocHeader-c2gnov-2 bYHnBw">Effects</span></div><ul class="toc__TocSubpages-c2gnov-4 FcGip"><div><li><div title="LightingEffect" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="LightingEffect" href="/deck.gl/docs/api-reference/core/lighting-effect">LightingEffect</a></div></div></li></div><div><li><div title="PostProcessEffect" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="PostProcessEffect" href="/deck.gl/docs/api-reference/core/post-process-effect">PostProcessEffect</a></div></div></li></div></ul></div><div><div title="Lights" class="toc__TocEntry-c2gnov-1 gwvshP"><svg viewBox="0 0 24 24" class="toc__TocChevron-c2gnov-0 gGlvpi" width="24" height="24"><title>Chevron Down</title><path transform="rotate(270, 12, 12)" fill-rule="evenodd" clip-rule="evenodd" d="M9 12C9 12.2652 9.10536 12.5196 9.29289 12.7071L13.2929 16.7071C13.6834 17.0976 14.3166 17.0976 14.7071 16.7071C15.0976 16.3166 15.0976 15.6834 14.7071 15.2929L11.4142 12L14.7071 8.70711C15.0976 8.31658 15.0976 7.68342 14.7071 7.29289C14.3166 6.90237 13.6834 6.90237 13.2929 7.29289L9.29289 11.2929C9.10536 11.4804 9 11.7348 9 12Z"></path></svg><span class="toc__TocHeader-c2gnov-2 bYHnBw">Lights</span></div><ul class="toc__TocSubpages-c2gnov-4 FcGip"><div><li><div title="AmbientLight" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="AmbientLight" href="/deck.gl/docs/api-reference/core/ambient-light">AmbientLight</a></div></div></li></div><div><li><div title="PointLight" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="PointLight" href="/deck.gl/docs/api-reference/core/point-light">PointLight</a></div></div></li></div><div><li><div title="DirectionalLight" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="DirectionalLight" href="/deck.gl/docs/api-reference/core/directional-light">DirectionalLight</a></div></div></li></div><div><li><div title="CameraLight (Experimental)" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="CameraLight (Experimental)" href="/deck.gl/docs/api-reference/core/camera-light">CameraLight (Experimental)</a></div></div></li></div><div><li><div title="SunLight (Experimental)" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="SunLight (Experimental)" href="/deck.gl/docs/api-reference/core/sun-light">SunLight (Experimental)</a></div></div></li></div></ul></div></ul></div><div><div title="Submodule API Reference" class="toc__TocEntry-c2gnov-1 kGHZqi"><svg viewBox="0 0 24 24" class="toc__TocChevron-c2gnov-0 isdBno" width="24" height="24"><title>Chevron Down</title><path transform="rotate(270, 12, 12)" fill-rule="evenodd" clip-rule="evenodd" d="M9 12C9 12.2652 9.10536 12.5196 9.29289 12.7071L13.2929 16.7071C13.6834 17.0976 14.3166 17.0976 14.7071 16.7071C15.0976 16.3166 15.0976 15.6834 14.7071 15.2929L11.4142 12L14.7071 8.70711C15.0976 8.31658 15.0976 7.68342 14.7071 7.29289C14.3166 6.90237 13.6834 6.90237 13.2929 7.29289L9.29289 11.2929C9.10536 11.4804 9 11.7348 9 12Z"></path></svg><span class="toc__TocHeader-c2gnov-2 bfuDSM">Submodule API Reference</span></div><ul class="toc__TocSubpages-c2gnov-4 FcGip"><div><div title="@deck.gl/arcgis" class="toc__TocEntry-c2gnov-1 gwvshP"><svg viewBox="0 0 24 24" class="toc__TocChevron-c2gnov-0 gGlvpi" width="24" height="24"><title>Chevron Down</title><path transform="rotate(270, 12, 12)" fill-rule="evenodd" clip-rule="evenodd" d="M9 12C9 12.2652 9.10536 12.5196 9.29289 12.7071L13.2929 16.7071C13.6834 17.0976 14.3166 17.0976 14.7071 16.7071C15.0976 16.3166 15.0976 15.6834 14.7071 15.2929L11.4142 12L14.7071 8.70711C15.0976 8.31658 15.0976 7.68342 14.7071 7.29289C14.3166 6.90237 13.6834 6.90237 13.2929 7.29289L9.29289 11.2929C9.10536 11.4804 9 11.7348 9 12Z"></path></svg><span class="toc__TocHeader-c2gnov-2 bYHnBw">@deck.gl/arcgis</span></div><ul class="toc__TocSubpages-c2gnov-4 FcGip"><div><li><div title="@deck.gl/arcgis" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="@deck.gl/arcgis" href="/deck.gl/docs/api-reference/arcgis/overview">@deck.gl/arcgis</a></div></div></li></div><div><li><div title="DeckLayer" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="DeckLayer" href="/deck.gl/docs/api-reference/arcgis/deck-layer">DeckLayer</a></div></div></li></div><div><li><div title="DeckRenderer" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="DeckRenderer" href="/deck.gl/docs/api-reference/arcgis/deck-renderer">DeckRenderer</a></div></div></li></div><div><li><div title="loadArcGISModules" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="loadArcGISModules" href="/deck.gl/docs/api-reference/arcgis/load-arcgis-modules">loadArcGISModules</a></div></div></li></div></ul></div><div><div title="@deck.gl/carto" class="toc__TocEntry-c2gnov-1 gwvshP"><svg viewBox="0 0 24 24" class="toc__TocChevron-c2gnov-0 gGlvpi" width="24" height="24"><title>Chevron Down</title><path transform="rotate(270, 12, 12)" fill-rule="evenodd" clip-rule="evenodd" d="M9 12C9 12.2652 9.10536 12.5196 9.29289 12.7071L13.2929 16.7071C13.6834 17.0976 14.3166 17.0976 14.7071 16.7071C15.0976 16.3166 15.0976 15.6834 14.7071 15.2929L11.4142 12L14.7071 8.70711C15.0976 8.31658 15.0976 7.68342 14.7071 7.29289C14.3166 6.90237 13.6834 6.90237 13.2929 7.29289L9.29289 11.2929C9.10536 11.4804 9 11.7348 9 12Z"></path></svg><span class="toc__TocHeader-c2gnov-2 bYHnBw">@deck.gl/carto</span></div><ul class="toc__TocSubpages-c2gnov-4 FcGip"><div><li><div title="@deck.gl/carto" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="@deck.gl/carto" href="/deck.gl/docs/api-reference/carto/overview">@deck.gl/carto</a></div></div></li></div><div><li><div title="fetchMap" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="fetchMap" href="/deck.gl/docs/api-reference/carto/fetch-map">fetchMap</a></div></div></li></div><div><li><div title="CartoLayer" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="CartoLayer" href="/deck.gl/docs/api-reference/carto/carto-layer">CartoLayer</a></div></div></li></div><div><li><div title="BASEMAP" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="BASEMAP" href="/deck.gl/docs/api-reference/carto/basemap">BASEMAP</a></div></div></li></div><div><li><div title="Styles" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="Styles" href="/deck.gl/docs/api-reference/carto/styles">Styles</a></div></div></li></div></ul></div><div><div title="@deck.gl/google-maps" class="toc__TocEntry-c2gnov-1 gwvshP"><svg viewBox="0 0 24 24" class="toc__TocChevron-c2gnov-0 gGlvpi" width="24" height="24"><title>Chevron Down</title><path transform="rotate(270, 12, 12)" fill-rule="evenodd" clip-rule="evenodd" d="M9 12C9 12.2652 9.10536 12.5196 9.29289 12.7071L13.2929 16.7071C13.6834 17.0976 14.3166 17.0976 14.7071 16.7071C15.0976 16.3166 15.0976 15.6834 14.7071 15.2929L11.4142 12L14.7071 8.70711C15.0976 8.31658 15.0976 7.68342 14.7071 7.29289C14.3166 6.90237 13.6834 6.90237 13.2929 7.29289L9.29289 11.2929C9.10536 11.4804 9 11.7348 9 12Z"></path></svg><span class="toc__TocHeader-c2gnov-2 bYHnBw">@deck.gl/google-maps</span></div><ul class="toc__TocSubpages-c2gnov-4 FcGip"><div><li><div title="@deck.gl/google-maps" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="@deck.gl/google-maps" href="/deck.gl/docs/api-reference/google-maps/overview">@deck.gl/google-maps</a></div></div></li></div><div><li><div title="GoogleMapsOverlay" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="GoogleMapsOverlay" href="/deck.gl/docs/api-reference/google-maps/google-maps-overlay">GoogleMapsOverlay</a></div></div></li></div></ul></div><div><div title="@deck.gl/extensions" class="toc__TocEntry-c2gnov-1 gwvshP"><svg viewBox="0 0 24 24" class="toc__TocChevron-c2gnov-0 gGlvpi" width="24" height="24"><title>Chevron Down</title><path transform="rotate(270, 12, 12)" fill-rule="evenodd" clip-rule="evenodd" d="M9 12C9 12.2652 9.10536 12.5196 9.29289 12.7071L13.2929 16.7071C13.6834 17.0976 14.3166 17.0976 14.7071 16.7071C15.0976 16.3166 15.0976 15.6834 14.7071 15.2929L11.4142 12L14.7071 8.70711C15.0976 8.31658 15.0976 7.68342 14.7071 7.29289C14.3166 6.90237 13.6834 6.90237 13.2929 7.29289L9.29289 11.2929C9.10536 11.4804 9 11.7348 9 12Z"></path></svg><span class="toc__TocHeader-c2gnov-2 bYHnBw">@deck.gl/extensions</span></div><ul class="toc__TocSubpages-c2gnov-4 FcGip"><div><li><div title="@deck.gl/extensions" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="@deck.gl/extensions" href="/deck.gl/docs/api-reference/extensions/overview">@deck.gl/extensions</a></div></div></li></div><div><li><div title="BrushingExtension" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="BrushingExtension" href="/deck.gl/docs/api-reference/extensions/brushing-extension">BrushingExtension</a></div></div></li></div><div><li><div title="ClipExtension" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="ClipExtension" href="/deck.gl/docs/api-reference/extensions/clip-extension">ClipExtension</a></div></div></li></div><div><li><div title="DataFilterExtension" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="DataFilterExtension" href="/deck.gl/docs/api-reference/extensions/data-filter-extension">DataFilterExtension</a></div></div></li></div><div><li><div title="FillStyleExtension" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="FillStyleExtension" href="/deck.gl/docs/api-reference/extensions/fill-style-extension">FillStyleExtension</a></div></div></li></div><div><li><div title="Fp64Extension" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="Fp64Extension" href="/deck.gl/docs/api-reference/extensions/fp64-extension">Fp64Extension</a></div></div></li></div><div><li><div title="MaskExtension" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="MaskExtension" href="/deck.gl/docs/api-reference/extensions/mask-extension">MaskExtension</a></div></div></li></div><div><li><div title="PathStyleExtension" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="PathStyleExtension" href="/deck.gl/docs/api-reference/extensions/path-style-extension">PathStyleExtension</a></div></div></li></div></ul></div><div><div title="@deck.gl/json" class="toc__TocEntry-c2gnov-1 gwvshP"><svg viewBox="0 0 24 24" class="toc__TocChevron-c2gnov-0 gGlvpi" width="24" height="24"><title>Chevron Down</title><path transform="rotate(270, 12, 12)" fill-rule="evenodd" clip-rule="evenodd" d="M9 12C9 12.2652 9.10536 12.5196 9.29289 12.7071L13.2929 16.7071C13.6834 17.0976 14.3166 17.0976 14.7071 16.7071C15.0976 16.3166 15.0976 15.6834 14.7071 15.2929L11.4142 12L14.7071 8.70711C15.0976 8.31658 15.0976 7.68342 14.7071 7.29289C14.3166 6.90237 13.6834 6.90237 13.2929 7.29289L9.29289 11.2929C9.10536 11.4804 9 11.7348 9 12Z"></path></svg><span class="toc__TocHeader-c2gnov-2 bYHnBw">@deck.gl/json</span></div><ul class="toc__TocSubpages-c2gnov-4 FcGip"><div><li><div title="@deck.gl/json" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="@deck.gl/json" href="/deck.gl/docs/api-reference/json/overview">@deck.gl/json</a></div></div></li></div><div><li><div title="JSONConverter" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="JSONConverter" href="/deck.gl/docs/api-reference/json/json-converter">JSONConverter</a></div></div></li></div><div><li><div title="JSONConfiguration" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="JSONConfiguration" href="/deck.gl/docs/api-reference/json/json-configuration">JSONConfiguration</a></div></div></li></div><div><li><div title="Conversion Reference" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="Conversion Reference" href="/deck.gl/docs/api-reference/json/conversion-reference">Conversion Reference</a></div></div></li></div></ul></div><div><div title="@deck.gl/mapbox" class="toc__TocEntry-c2gnov-1 gwvshP"><svg viewBox="0 0 24 24" class="toc__TocChevron-c2gnov-0 gGlvpi" width="24" height="24"><title>Chevron Down</title><path transform="rotate(270, 12, 12)" fill-rule="evenodd" clip-rule="evenodd" d="M9 12C9 12.2652 9.10536 12.5196 9.29289 12.7071L13.2929 16.7071C13.6834 17.0976 14.3166 17.0976 14.7071 16.7071C15.0976 16.3166 15.0976 15.6834 14.7071 15.2929L11.4142 12L14.7071 8.70711C15.0976 8.31658 15.0976 7.68342 14.7071 7.29289C14.3166 6.90237 13.6834 6.90237 13.2929 7.29289L9.29289 11.2929C9.10536 11.4804 9 11.7348 9 12Z"></path></svg><span class="toc__TocHeader-c2gnov-2 bYHnBw">@deck.gl/mapbox</span></div><ul class="toc__TocSubpages-c2gnov-4 FcGip"><div><li><div title="@deck.gl/mapbox" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="@deck.gl/mapbox" href="/deck.gl/docs/api-reference/mapbox/overview">@deck.gl/mapbox</a></div></div></li></div><div><li><div title="MapboxLayer" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="MapboxLayer" href="/deck.gl/docs/api-reference/mapbox/mapbox-layer">MapboxLayer</a></div></div></li></div></ul></div><div><div title="@deck.gl/react" class="toc__TocEntry-c2gnov-1 gwvshP"><svg viewBox="0 0 24 24" class="toc__TocChevron-c2gnov-0 gGlvpi" width="24" height="24"><title>Chevron Down</title><path transform="rotate(270, 12, 12)" fill-rule="evenodd" clip-rule="evenodd" d="M9 12C9 12.2652 9.10536 12.5196 9.29289 12.7071L13.2929 16.7071C13.6834 17.0976 14.3166 17.0976 14.7071 16.7071C15.0976 16.3166 15.0976 15.6834 14.7071 15.2929L11.4142 12L14.7071 8.70711C15.0976 8.31658 15.0976 7.68342 14.7071 7.29289C14.3166 6.90237 13.6834 6.90237 13.2929 7.29289L9.29289 11.2929C9.10536 11.4804 9 11.7348 9 12Z"></path></svg><span class="toc__TocHeader-c2gnov-2 bYHnBw">@deck.gl/react</span></div><ul class="toc__TocSubpages-c2gnov-4 FcGip"><div><li><div title="DeckGL (React Component)" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="DeckGL (React Component)" href="/deck.gl/docs/api-reference/react/deckgl">DeckGL (React Component)</a></div></div></li></div></ul></div><div><div title="@deck.gl/test-utils" class="toc__TocEntry-c2gnov-1 gwvshP"><svg viewBox="0 0 24 24" class="toc__TocChevron-c2gnov-0 gGlvpi" width="24" height="24"><title>Chevron Down</title><path transform="rotate(270, 12, 12)" fill-rule="evenodd" clip-rule="evenodd" d="M9 12C9 12.2652 9.10536 12.5196 9.29289 12.7071L13.2929 16.7071C13.6834 17.0976 14.3166 17.0976 14.7071 16.7071C15.0976 16.3166 15.0976 15.6834 14.7071 15.2929L11.4142 12L14.7071 8.70711C15.0976 8.31658 15.0976 7.68342 14.7071 7.29289C14.3166 6.90237 13.6834 6.90237 13.2929 7.29289L9.29289 11.2929C9.10536 11.4804 9 11.7348 9 12Z"></path></svg><span class="toc__TocHeader-c2gnov-2 bYHnBw">@deck.gl/test-utils</span></div><ul class="toc__TocSubpages-c2gnov-4 FcGip"><div><li><div title="@deck.gl/test-utils" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="@deck.gl/test-utils" href="/deck.gl/docs/api-reference/test-utils/overview">@deck.gl/test-utils</a></div></div></li></div><div><li><div title="generateLayerTests" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="generateLayerTests" href="/deck.gl/docs/api-reference/test-utils/generate-layer-tests">generateLayerTests</a></div></div></li></div><div><li><div title="testLayer" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="testLayer" href="/deck.gl/docs/api-reference/test-utils/test-layer">testLayer</a></div></div></li></div><div><li><div title="SnapshotTestRunner" class="toc__TocEntry-c2gnov-1 gwvshP"><div class="toc__TocLink-c2gnov-3 iVEvtf"><a title="SnapshotTestRunner" href="/deck.gl/docs/api-reference/test-utils/snapshot-test-runner">SnapshotTestRunner</a></div></div></li></div></ul></div></ul></div></div><div class="body__BodyContainerToC-lvm4v2-1 idNLwm"><div style="position:relative"><div class="typography__MarkdownBody-sc-1pmaksm-11 iTIrjR"><h1 id="performance-optimization" style="position:relative" class="typography__H1-sc-1pmaksm-2 dMTgn"><a href="#performance-optimization" aria-label="performance optimization permalink" class="typography__A-sc-1pmaksm-0 dvhuEd anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Performance Optimization</h1><h2 style="position:relative" id="general-performance-expectations" class="typography__H2-sc-1pmaksm-3 jYCwIr"><a href="#general-performance-expectations" aria-label="general performance expectations permalink" class="typography__A-sc-1pmaksm-0 dvhuEd anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>General Performance Expectations</h2><p class="typography__P-sc-1pmaksm-8 cncNYa">There are mainly two aspects that developers usually consider regarding the
performance of any computer programs: the time and the memory consumption, both of which obviously depends on the specs of the hardware deck.gl is ultimately running on.</p><p class="typography__P-sc-1pmaksm-8 cncNYa">On 2015 MacBook Pros with dual graphics cards, most basic layers
(like <code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-text">ScatterplotLayer</code>) renders fluidly at 60 FPS during pan and zoom
operations up to about 1M (one million) data items, with framerates dropping into low double digits (10-20FPS) when the data sets approach 10M items.</p><p class="typography__P-sc-1pmaksm-8 cncNYa">Even if interactivity is not an issue, browser limitations on how big chunks of contiguous memory can be allocated (e.g. Chrome caps individual allocations at 1GB) will cause most layers to crash during WebGL buffer generation somewhere between 10M and 100M items. You would need to break up your data into chunks and use multiple deck.gl layers to get past this limit.</p><p class="typography__P-sc-1pmaksm-8 cncNYa">Modern phones (recent iPhones and higher-end Android phones) are surprisingly capable in terms of rendering performance, but are considerably more sensitive to memory pressure than laptops, resulting in browser restarts or page reloads. They also tend to load data significantly slower than desktop computers, so some tuning is usually needed to ensure a good overall user experience on mobile.</p><h2 style="position:relative" id="layer-update-performance" class="typography__H2-sc-1pmaksm-3 jYCwIr"><a href="#layer-update-performance" aria-label="layer update performance permalink" class="typography__A-sc-1pmaksm-0 dvhuEd anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Layer Update Performance</h2><p class="typography__P-sc-1pmaksm-8 cncNYa">Layer update happens when the layer is first created, or when some layer props change. During an update, deck.gl may load necessary resources (e.g. image textures), generate WebGL buffers, and upload them to the GPU, all of which may take some time to complete, depending on the number of items in your <code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-text">data</code> prop. Therefore, the key to performant deck.gl applications is to minimize layer updates wherever possible.</p><h3 style="position:relative" id="minimize-data-changes" class="typography__H3-sc-1pmaksm-4 ePRhQs"><a href="#minimize-data-changes" aria-label="minimize data changes permalink" class="typography__A-sc-1pmaksm-0 dvhuEd anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Minimize data changes</h3><p class="typography__P-sc-1pmaksm-8 cncNYa">When the <code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-text">data</code> prop changes, the layer will recalculate all of its WebGL buffers. The time required for this is proportional to the number of items in your
<code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-text">data</code> prop.
This step is the most expensive operation that a layer does - also on CPU - potentially affecting the responsiveness of the application. It may take
multiple seconds for multi-million item layers, and if your <code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-text">data</code> prop is updated
frequently (e.g. animations), &quot;stutter&quot; can be visible even for layers with just a few thousand items.</p><p class="typography__P-sc-1pmaksm-8 cncNYa">Some good places to check for performance improvements are:</p><h4 style="position:relative" id="avoid-unnecessary-shallow-change-in-data-prop" class="typography__H4-sc-1pmaksm-5 dMIfYV"><a href="#avoid-unnecessary-shallow-change-in-data-prop" aria-label="avoid unnecessary shallow change in data prop permalink" class="typography__A-sc-1pmaksm-0 dvhuEd anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Avoid unnecessary shallow change in data prop</h4><p class="typography__P-sc-1pmaksm-8 cncNYa">  The layer does a shallow comparison between renders to determine if it needs to regenerate buffers. If
nothing has changed, make sure you supply the <em>same</em> data object every time you render. If the data object has to change shallowly for some reason, consider using the <code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-text">dataComparator</code> prop to supply a custom comparison logic.</p><div class="gatsby-highlight" data-language="js"><pre class="typography__Pre-sc-1pmaksm-14 fjuJKd language-js"><code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-js"><span class="token comment">// Bad</span>
<span class="token keyword">const</span> <span class="token constant">DATA</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> filters <span class="token operator">=</span> <span class="token punctuation">{</span>minTime<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> maxTime<span class="token operator">:</span> <span class="token number">Infinity</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">setFilters</span><span class="token punctuation">(</span><span class="token parameter">minTime<span class="token punctuation">,</span> maxTime</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  filters<span class="token punctuation">.</span>minTime <span class="token operator">=</span> minTime<span class="token punctuation">;</span>
  filters<span class="token punctuation">.</span>maxTime <span class="token operator">=</span> maxTime<span class="token punctuation">;</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> layer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ScatterplotLayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// `filter` creates a new array every time `render` is called, even if the filters have not changed</span>
    data<span class="token operator">:</span> <span class="token constant">DATA</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">d</span> <span class="token operator">=&gt;</span> d<span class="token punctuation">.</span>time <span class="token operator">&gt;=</span> filters<span class="token punctuation">.</span>minTime <span class="token operator">&amp;&amp;</span> d<span class="token punctuation">.</span>time <span class="token operator">&lt;=</span> filters<span class="token punctuation">.</span>maxTime<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  deck<span class="token punctuation">.</span><span class="token function">setProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span>layers<span class="token operator">:</span> <span class="token punctuation">[</span>layer<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div><div class="gatsby-highlight" data-language="js"><pre class="typography__Pre-sc-1pmaksm-14 fjuJKd language-js"><code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-js"><span class="token comment">// Good</span>
<span class="token keyword">const</span> <span class="token constant">DATA</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> filteredData <span class="token operator">=</span> <span class="token constant">DATA</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> filters <span class="token operator">=</span> <span class="token punctuation">{</span>minTime<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> maxTime<span class="token operator">:</span> <span class="token number">Infinity</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">setFilters</span><span class="token punctuation">(</span><span class="token parameter">minTime<span class="token punctuation">,</span> maxTime</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  filters<span class="token punctuation">.</span>minTime <span class="token operator">=</span> minTime<span class="token punctuation">;</span>
  filters<span class="token punctuation">.</span>maxTime <span class="token operator">=</span> maxTime<span class="token punctuation">;</span>
  <span class="token comment">// filtering is performed only once when the filters change</span>
  filteredData <span class="token operator">=</span> <span class="token constant">DATA</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">d</span> <span class="token operator">=&gt;</span> d<span class="token punctuation">.</span>time <span class="token operator">&gt;=</span> minTime <span class="token operator">&amp;&amp;</span> d<span class="token punctuation">.</span>time <span class="token operator">&lt;=</span> maxTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> layer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ScatterplotLayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    data<span class="token operator">:</span> filteredData<span class="token punctuation">,</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  deck<span class="token punctuation">.</span><span class="token function">setProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span>layers<span class="token operator">:</span> <span class="token punctuation">[</span>layer<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div><h4 style="position:relative" id="use-updatetriggers" class="typography__H4-sc-1pmaksm-5 dMIfYV"><a href="#use-updatetriggers" aria-label="use updatetriggers permalink" class="typography__A-sc-1pmaksm-0 dvhuEd anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Use updateTriggers</h4><p class="typography__P-sc-1pmaksm-8 cncNYa">  So <code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-text">data</code> has indeed changed. Do we have an entirely new collection of objects? Or did just certain fields changed in each row? Remember that changing <code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-text">data</code> will update <em>all</em> buffers, so if, for example, object positions have not changed, it will be a waste of time to recalculate them.</p><div class="gatsby-highlight" data-language="js"><pre class="typography__Pre-sc-1pmaksm-14 fjuJKd language-js"><code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-js"><span class="token comment">// Bad</span>
<span class="token keyword">const</span> <span class="token constant">DATA</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> currentYear <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> currentData <span class="token operator">=</span> <span class="token constant">DATA</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">selectYear</span><span class="token punctuation">(</span><span class="token parameter">year</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  currentYear <span class="token operator">=</span> year<span class="token punctuation">;</span>
  currentData <span class="token operator">=</span> <span class="token constant">DATA</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">d</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    position<span class="token operator">:</span> d<span class="token punctuation">.</span>position<span class="token punctuation">,</span>
    population<span class="token operator">:</span> d<span class="token punctuation">.</span>populationsByYear<span class="token punctuation">[</span>year<span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> layer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ScatterplotLayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// `data` changes every time year changed, but positions don&#x27;t need to update</span>
    data<span class="token operator">:</span> currentData<span class="token punctuation">,</span>
    <span class="token function-variable function">getPosition</span><span class="token operator">:</span> <span class="token parameter">d</span> <span class="token operator">=&gt;</span> d<span class="token punctuation">.</span>position<span class="token punctuation">,</span>
    <span class="token function-variable function">getRadius</span><span class="token operator">:</span> <span class="token parameter">d</span> <span class="token operator">=&gt;</span> Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>population<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  deck<span class="token punctuation">.</span><span class="token function">setProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span>layers<span class="token operator">:</span> <span class="token punctuation">[</span>layer<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div><p class="typography__P-sc-1pmaksm-8 cncNYa">  In this case, it is more efficient to use <a class="typography__GatsbyA-sc-1pmaksm-1 dMoEUD" href="/deck.gl/docs/api-reference/core/layer#updatetriggers"><code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-text">updateTriggers</code></a> to invalidate only the selected attributes:</p><div class="gatsby-highlight" data-language="js"><pre class="typography__Pre-sc-1pmaksm-14 fjuJKd language-js"><code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-js"><span class="token comment">// Good</span>
<span class="token keyword">const</span> <span class="token constant">DATA</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> currentYear <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">selectYear</span><span class="token punctuation">(</span><span class="token parameter">year</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  currentYear <span class="token operator">=</span> year<span class="token punctuation">;</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> layer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ScatterplotLayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// `data` never changes</span>
    data<span class="token operator">:</span> <span class="token constant">DATA</span><span class="token punctuation">,</span>
    <span class="token function-variable function">getPosition</span><span class="token operator">:</span> <span class="token parameter">d</span> <span class="token operator">=&gt;</span> d<span class="token punctuation">.</span>position<span class="token punctuation">,</span>
    <span class="token comment">// radius depends on `currentYear`</span>
    <span class="token function-variable function">getRadius</span><span class="token operator">:</span> <span class="token parameter">d</span> <span class="token operator">=&gt;</span> Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>populationsByYear<span class="token punctuation">[</span>currentYear<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    updateTriggers<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// This tells deck.gl to recalculate radius when `currentYear` changes</span>
      getRadius<span class="token operator">:</span> currentYear
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  deck<span class="token punctuation">.</span><span class="token function">setProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span>layers<span class="token operator">:</span> <span class="token punctuation">[</span>layer<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div><h4 style="position:relative" id="handle-incremental-data-loading" class="typography__H4-sc-1pmaksm-5 dMIfYV"><a href="#handle-incremental-data-loading" aria-label="handle incremental data loading permalink" class="typography__A-sc-1pmaksm-0 dvhuEd anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Handle incremental data loading</h4><p class="typography__P-sc-1pmaksm-8 cncNYa">  A common technique for handling big datasets on the client side is to load data in chunks. We want to update the visualization whenever a new chunk comes in. If we append the new chunk to an existing data array, deck.gl will recalculate the whole buffers, even for the previously loaded chunks where nothing have changed:</p><div class="gatsby-highlight" data-language="js"><pre class="typography__Pre-sc-1pmaksm-14 fjuJKd language-js"><code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-js"><span class="token comment">// Bad</span>
<span class="token keyword">let</span> loadedData <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">onNewDataArrive</span><span class="token punctuation">(</span><span class="token parameter">chunk</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  loadedData <span class="token operator">=</span> loadedData<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>chunk<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> layer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ScatterplotLayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// If we have 1 million rows loaded and 100,000 new rows arrive,</span>
    <span class="token comment">// we end up recalculating the buffers for all 1,100,000 rows</span>
    data<span class="token operator">:</span> loadedData<span class="token punctuation">,</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  deck<span class="token punctuation">.</span><span class="token function">setProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span>layers<span class="token operator">:</span> <span class="token punctuation">[</span>layer<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div><p class="typography__P-sc-1pmaksm-8 cncNYa">  To avoid doing this, we instead generate one layer for each chunk:</p><div class="gatsby-highlight" data-language="js"><pre class="typography__Pre-sc-1pmaksm-14 fjuJKd language-js"><code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-js"><span class="token comment">// Good</span>
<span class="token keyword">const</span> dataChunks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">onNewDataArrive</span><span class="token punctuation">(</span><span class="token parameter">chunk</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  dataChunks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>chunk<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> layers <span class="token operator">=</span> dataChunks<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">chunk<span class="token punctuation">,</span> chunkIndex</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">ScatterplotLayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// Important: each layer must have a consistent &amp; unique id</span>
    id<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">chunk-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>chunkIndex<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token comment">// If we have 10 100,000-row chunks already loaded and a new one arrive,</span>
    <span class="token comment">// the first 10 layers will see no prop change</span>
    <span class="token comment">// only the 11th layer&#x27;s buffers need to be generated</span>
    data<span class="token operator">:</span> chunk<span class="token punctuation">,</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  deck<span class="token punctuation">.</span><span class="token function">setProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span>layers<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div><p class="typography__P-sc-1pmaksm-8 cncNYa">  Starting v7.2.0, support for async iterables is added to efficiently update layers with incrementally loaded data:</p><div class="gatsby-highlight" data-language="js"><pre class="typography__Pre-sc-1pmaksm-14 fjuJKd language-js"><code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-js"><span class="token comment">// Create an async iterable</span>
<span class="token keyword">async</span> <span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token keyword">const</span> chunk <span class="token operator">=</span> <span class="token function">fetchChunk</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">yield</span> chunk<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> layer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ScatterplotLayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// When a new chunk arrives, deck.gl only updates the sub buffers for the new rows</span>
    data<span class="token operator">:</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  deck<span class="token punctuation">.</span><span class="token function">setProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span>layers<span class="token operator">:</span> <span class="token punctuation">[</span>layer<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div><p class="typography__P-sc-1pmaksm-8 cncNYa">  See <a class="typography__GatsbyA-sc-1pmaksm-1 dMoEUD" href="/deck.gl/docs/api-reference/core/layer#basic-properties">Layer properties</a> for details.</p><h4 style="position:relative" id="favor-layer-visibility-over-addition-and-removal" class="typography__H4-sc-1pmaksm-5 dMIfYV"><a href="#favor-layer-visibility-over-addition-and-removal" aria-label="favor layer visibility over addition and removal permalink" class="typography__A-sc-1pmaksm-0 dvhuEd anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Favor layer visibility over addition and removal</h4><p class="typography__P-sc-1pmaksm-8 cncNYa">  Removing a layer will lose all of its internal states, including generated buffers. If the layer is added back later, all the WebGL resources need to be regenerated again. In the use cases where layers need to be toggled frequently (e.g. via a control panel), there might be a significant perf penalty:</p><div class="gatsby-highlight" data-language="js"><pre class="typography__Pre-sc-1pmaksm-14 fjuJKd language-js"><code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-js"><span class="token comment">// Bad</span>
<span class="token keyword">const</span> <span class="token constant">DATA</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> layerVisibility <span class="token operator">=</span> <span class="token punctuation">{</span>circles<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> labels<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">toggleLayer</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  layerVisibility<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">!</span>layerVisibility<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> layers <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token comment">// when visibility goes from on to off to on, this layer will be completely removed and then regenerated</span>
    layerVisibility<span class="token punctuation">.</span>circles <span class="token operator">&amp;&amp;</span> <span class="token keyword">new</span> <span class="token class-name">ScatterplotLayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      data<span class="token operator">:</span> <span class="token constant">DATA</span><span class="token punctuation">,</span>
      <span class="token operator">...</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    layerVisibility<span class="token punctuation">.</span>labels <span class="token operator">&amp;&amp;</span> <span class="token keyword">new</span> <span class="token class-name">TextLayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      data<span class="token operator">:</span> <span class="token constant">DATA</span><span class="token punctuation">,</span>
      <span class="token operator">...</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>

  deck<span class="token punctuation">.</span><span class="token function">setProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span>layers<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div><p class="typography__P-sc-1pmaksm-8 cncNYa">  The <a class="typography__GatsbyA-sc-1pmaksm-1 dMoEUD" href="/deck.gl/docs/api-reference/core/layer#visible"><code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-text">visible</code></a> prop is a cheap way to temporarily disable a layer:</p><div class="gatsby-highlight" data-language="js"><pre class="typography__Pre-sc-1pmaksm-14 fjuJKd language-js"><code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-js"><span class="token comment">// Good</span>
<span class="token keyword">const</span> <span class="token constant">DATA</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> layerVisibility <span class="token operator">=</span> <span class="token punctuation">{</span>circles<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> labels<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">toggleLayer</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  layerVisibility<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">!</span>layerVisibility<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> layers <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token comment">// when visibility is off, this layer&#x27;s internal states will be retained in memory, making turning it back on instant</span>
    <span class="token keyword">new</span> <span class="token class-name">ScatterplotLayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      data<span class="token operator">:</span> <span class="token constant">DATA</span><span class="token punctuation">,</span>
      visible<span class="token operator">:</span> layerVisibility<span class="token punctuation">.</span>circles<span class="token punctuation">,</span>
      <span class="token operator">...</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">TextLayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      data<span class="token operator">:</span> <span class="token constant">DATA</span><span class="token punctuation">,</span>
      visible<span class="token operator">:</span> layerVisibility<span class="token punctuation">.</span>labels<span class="token punctuation">,</span>
      <span class="token operator">...</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>

  deck<span class="token punctuation">.</span><span class="token function">setProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span>layers<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div><h3 style="position:relative" id="optimize-accessors" class="typography__H3-sc-1pmaksm-4 ePRhQs"><a href="#optimize-accessors" aria-label="optimize accessors permalink" class="typography__A-sc-1pmaksm-0 dvhuEd anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Optimize Accessors</h3><p class="typography__P-sc-1pmaksm-8 cncNYa">99% of the CPU time that deck.gl spends in updating buffers is calling the accessors you supply to the layer. Since they are called on every data object, any performance issue in the accessors is amplified by the size of your data.</p><h4 style="position:relative" id="favor-constants-over-callback-functions" class="typography__H4-sc-1pmaksm-5 dMIfYV"><a href="#favor-constants-over-callback-functions" aria-label="favor constants over callback functions permalink" class="typography__A-sc-1pmaksm-0 dvhuEd anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Favor constants over callback functions</h4><p class="typography__P-sc-1pmaksm-8 cncNYa">  Most accessors accept constant values as well as functions. Constant props are extremely cheap to update in comparison. Use <code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-text">ScatterplotLayer</code> as an example, the following two prop settings yield exactly the same visual outcome:</p><ul class="typography__List-sc-1pmaksm-9 hsOfQe"><li class="typography__ListItem-sc-1pmaksm-10 kVRSNy"><p class="typography__P-sc-1pmaksm-8 cncNYa"><code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-text">getFillColor: [255, 0, 0, 128]</code> - deck.gl uploads 4 numbers to the GPU.</p></li><li class="typography__ListItem-sc-1pmaksm-10 kVRSNy"><p class="typography__P-sc-1pmaksm-8 cncNYa"><code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-text">getFillColor: d =&gt; [255, 0, 0, 128]</code> - deck.gl first builds a typed array of <code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-text">4 * data.length</code> elements, call the accessor <code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-text">data.length</code> times to fill it, then upload it to the GPU.</p><p class="typography__P-sc-1pmaksm-8 cncNYa">Aside from accessors, most layers also offer one or more <code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-text">*Scale</code> props that are uniform multipliers on top of the per-object value. Always consider using them before invoking the accessors:</p><div class="gatsby-highlight" data-language="js"><pre class="typography__Pre-sc-1pmaksm-14 fjuJKd language-js"><code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-js"><span class="token comment">// Bad</span>
<span class="token keyword">const</span> <span class="token constant">DATA</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>animate<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> scale <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">2000</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> layer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ScatterplotLayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    data<span class="token operator">:</span> <span class="token constant">DATA</span><span class="token punctuation">,</span>
    <span class="token function-variable function">getRadius</span><span class="token operator">:</span> <span class="token parameter">object</span> <span class="token operator">=&gt;</span> object<span class="token punctuation">.</span>size <span class="token operator">*</span> scale<span class="token punctuation">,</span>
    <span class="token comment">// deck.gl will call `getRadius` for ALL data objects every animation frame, which will likely choke the app</span>
    updateTriggers<span class="token operator">:</span> <span class="token punctuation">{</span>
      getRadius<span class="token operator">:</span> scale
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  deck<span class="token punctuation">.</span><span class="token function">setProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span>layers<span class="token operator">:</span> <span class="token punctuation">[</span>layer<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div><div class="gatsby-highlight" data-language="js"><pre class="typography__Pre-sc-1pmaksm-14 fjuJKd language-js"><code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-js"><span class="token comment">// Good</span>
<span class="token keyword">const</span> <span class="token constant">DATA</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>animate<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> scale <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">2000</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> layer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ScatterplotLayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    data<span class="token operator">:</span> <span class="token constant">DATA</span><span class="token punctuation">,</span>
    <span class="token function-variable function">getRadius</span><span class="token operator">:</span> <span class="token parameter">object</span> <span class="token operator">=&gt;</span> object<span class="token punctuation">.</span>size<span class="token punctuation">,</span>
    <span class="token comment">// This has virtually no cost to update, easily getting 60fps animation</span>
    radiusScale<span class="token operator">:</span> scale<span class="token punctuation">,</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  deck<span class="token punctuation">.</span><span class="token function">setProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span>layers<span class="token operator">:</span> <span class="token punctuation">[</span>layer<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div></li></ul><h4 style="position:relative" id="use-trivial-functions-as-accessors" class="typography__H4-sc-1pmaksm-5 dMIfYV"><a href="#use-trivial-functions-as-accessors" aria-label="use trivial functions as accessors permalink" class="typography__A-sc-1pmaksm-0 dvhuEd anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Use trivial functions as accessors</h4><p class="typography__P-sc-1pmaksm-8 cncNYa">  Whenever possible, make the accessors trivial functions and utilize pre-defined and/or pre-computed data.</p><div class="gatsby-highlight" data-language="js"><pre class="typography__Pre-sc-1pmaksm-14 fjuJKd language-js"><code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-js"><span class="token comment">// Bad</span>
<span class="token keyword">const</span> <span class="token constant">DATA</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> layer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ScatterplotLayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    data<span class="token operator">:</span> <span class="token constant">DATA</span><span class="token punctuation">,</span>
    <span class="token function-variable function">getFillColor</span><span class="token operator">:</span> <span class="token parameter">object</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// This line creates a new values array from each object</span>
      <span class="token comment">// which can incur significant cost in garbage collection</span>
      <span class="token keyword">const</span> maxPopulation <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>object<span class="token punctuation">.</span>populationsByYear<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// This switch case creates a new color array for each object</span>
      <span class="token comment">// which can also incur significant cost in garbage collection</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>maxPopulation <span class="token operator">&gt;</span> <span class="token number">1000000</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>maxPopulation <span class="token operator">&gt;</span> <span class="token number">100000</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">getRadius</span><span class="token operator">:</span> <span class="token parameter">object</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// This line duplicates what&#x27;s done in `getFillColor` and doubles the cost</span>
      <span class="token keyword">const</span> maxPopulation <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>object<span class="token punctuation">.</span>populationsByYear<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span>maxPopulation<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  deck<span class="token punctuation">.</span><span class="token function">setProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span>layers<span class="token operator">:</span> <span class="token punctuation">[</span>layer<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div><div class="gatsby-highlight" data-language="js"><pre class="typography__Pre-sc-1pmaksm-14 fjuJKd language-js"><code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-js"><span class="token comment">// Good</span>
<span class="token keyword">const</span> <span class="token constant">DATA</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// Use a for loop to avoid creating new objects</span>
<span class="token keyword">function</span> <span class="token function">getMaxPopulation</span><span class="token punctuation">(</span><span class="token parameter">populationsByYear</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> maxPopulation <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> year <span class="token keyword">in</span> populationsByYear<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> population <span class="token operator">=</span> populationsByYear<span class="token punctuation">[</span>year<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>population <span class="token operator">&gt;</span> maxPopulation<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      maxPopulation <span class="token operator">=</span> population<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> maxPopulation<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Calculate max population once and store it in the data</span>
<span class="token constant">DATA</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">d</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  d<span class="token punctuation">.</span>maxPopulation <span class="token operator">=</span> <span class="token function">getMaxPopulation</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>populationsByYear<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Use constant color values to avoid generating new arrays</span>
<span class="token keyword">const</span> <span class="token constant">COLORS</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token constant">ONE_MILLION</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token constant">HUNDRED_THOUSAND</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token constant">OTHER</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> layer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ScatterplotLayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    data<span class="token operator">:</span> <span class="token constant">DATA</span><span class="token punctuation">,</span>
    <span class="token function-variable function">getFillColor</span><span class="token operator">:</span> <span class="token parameter">object</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>object<span class="token punctuation">.</span>maxPopulation <span class="token operator">&gt;</span> <span class="token number">1000000</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token constant">COLORS</span><span class="token punctuation">.</span><span class="token constant">ONE_MILLION</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>maxPopulation <span class="token operator">&gt;</span> <span class="token number">100000</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token constant">COLORS</span><span class="token punctuation">.</span><span class="token constant">HUNDRED_THOUSAND</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token constant">COLORS</span><span class="token punctuation">.</span><span class="token constant">OTHER</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">getRadius</span><span class="token operator">:</span> <span class="token parameter">object</span> <span class="token operator">=&gt;</span> Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span>object<span class="token punctuation">.</span>maxPopulation<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  deck<span class="token punctuation">.</span><span class="token function">setProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span>layers<span class="token operator">:</span> <span class="token punctuation">[</span>layer<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div><h3 style="position:relative" id="use-binary-data" class="typography__H3-sc-1pmaksm-4 ePRhQs"><a href="#use-binary-data" aria-label="use binary data permalink" class="typography__A-sc-1pmaksm-0 dvhuEd anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Use Binary Data</h3><p class="typography__P-sc-1pmaksm-8 cncNYa">When creating data-intensive applications, it is often desirable to offload client-side data processing to the server or web workers.</p><p class="typography__P-sc-1pmaksm-8 cncNYa">The server can send data to the client more efficiently using binary formats, e.g. <a href="https://developers.google.com/protocol-buffers" class="typography__A-sc-1pmaksm-0 dvhuEd">protobuf</a>, <a href="https://arrow.apache.org/" class="typography__A-sc-1pmaksm-0 dvhuEd">Arrow</a> or simply a custom binary blob.</p><p class="typography__P-sc-1pmaksm-8 cncNYa">Some deck.gl applications use web workers to load data and generate attributes to get the processing off the main thread. Modern worker implementations allow ownership of typed arrays to be <a href="https://developer.mozilla.org/en-US/docs/Web/API/Worker/postMessage#Parameters" class="typography__A-sc-1pmaksm-0 dvhuEd">transferred directly</a> between threads at virtually no cost, bypassing serialization and deserialization of JSON objects.</p><h4 style="position:relative" id="supply-binary-blobs-to-the-data-prop" class="typography__H4-sc-1pmaksm-5 dMIfYV"><a href="#supply-binary-blobs-to-the-data-prop" aria-label="supply binary blobs to the data prop permalink" class="typography__A-sc-1pmaksm-0 dvhuEd anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Supply binary blobs to the data prop</h4><p class="typography__P-sc-1pmaksm-8 cncNYa">  Assume we have the data source encoded in the following format:</p><div class="gatsby-highlight" data-language="js"><pre class="typography__Pre-sc-1pmaksm-14 fjuJKd language-js"><code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-js"><span class="token comment">// lon1, lat1, radius1, red1, green1, blue1, lon2, lat2, ...</span>
<span class="token keyword">const</span> binaryData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Float32Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">122.4</span><span class="token punctuation">,</span> <span class="token number">37.78</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">122.41</span><span class="token punctuation">,</span> <span class="token number">37.775</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">122.39</span><span class="token punctuation">,</span> <span class="token number">37.8</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div><p class="typography__P-sc-1pmaksm-8 cncNYa">  Upon receiving the typed arrays, the application can of course re-construct a classic JavaScript array:</p><div class="gatsby-highlight" data-language="js"><pre class="typography__Pre-sc-1pmaksm-14 fjuJKd language-js"><code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-js"><span class="token comment">// Bad</span>
<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> binaryData<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">6</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  data<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    position<span class="token operator">:</span> binaryData<span class="token punctuation">.</span><span class="token function">subarray</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    radius<span class="token operator">:</span> binaryData<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    color<span class="token operator">:</span> binaryData<span class="token punctuation">.</span><span class="token function">subarray</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token number">6</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">new</span> <span class="token class-name">ScatterplotLayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  data<span class="token punctuation">,</span>
  <span class="token function-variable function">getPosition</span><span class="token operator">:</span> <span class="token parameter">d</span> <span class="token operator">=&gt;</span> d<span class="token punctuation">.</span>position<span class="token punctuation">,</span>
  <span class="token function-variable function">getRadius</span><span class="token operator">:</span> <span class="token parameter">d</span> <span class="token operator">=&gt;</span> d<span class="token punctuation">.</span>radius<span class="token punctuation">,</span>
  <span class="token function-variable function">getFillColor</span><span class="token operator">:</span> <span class="token parameter">d</span> <span class="token operator">=&gt;</span> d<span class="token punctuation">.</span>color
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div><p class="typography__P-sc-1pmaksm-8 cncNYa">  However, in addition to requiring custom repacking code, this array will take valuable CPU time to create, and significantly more memory to store than its binary form. In performance-sensitive applications that constantly push a large volume of data (e.g. animations), this method will not be efficient enough.</p><p class="typography__P-sc-1pmaksm-8 cncNYa">  Alternatively, one may supply a non-iterable object (not Array or TypedArray) to the <code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-text">data</code> object. In this case, it must contain a <code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-text">length</code> field that specifies the total number of objects. Since <code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-text">data</code> is not iterable, each accessor will not receive a valid <code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-text">object</code> argument, and therefore responsible of interpreting the input data&#x27;s buffer layout:</p><div class="gatsby-highlight" data-language="js"><pre class="typography__Pre-sc-1pmaksm-14 fjuJKd language-js"><code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-js"><span class="token comment">// Good</span>
<span class="token comment">// Note: binaryData.length does not equal the number of items,</span>
<span class="token comment">// which is why we need to wrap it in an object that contains a custom `length` field</span>
<span class="token keyword">const</span> <span class="token constant">DATA</span> <span class="token operator">=</span> <span class="token punctuation">{</span>src<span class="token operator">:</span> binaryData<span class="token punctuation">,</span> length<span class="token operator">:</span> binaryData<span class="token punctuation">.</span>length <span class="token operator">/</span> <span class="token number">6</span><span class="token punctuation">}</span>

<span class="token keyword">new</span> <span class="token class-name">ScatterplotLayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  data<span class="token operator">:</span> <span class="token constant">DATA</span><span class="token punctuation">,</span>
  <span class="token function-variable function">getPosition</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">object<span class="token punctuation">,</span> <span class="token punctuation">{</span>index<span class="token punctuation">,</span> data<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> data<span class="token punctuation">.</span>src<span class="token punctuation">.</span><span class="token function">subarray</span><span class="token punctuation">(</span>index <span class="token operator">*</span> <span class="token number">6</span><span class="token punctuation">,</span> index <span class="token operator">*</span> <span class="token number">6</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">getRadius</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">object<span class="token punctuation">,</span> <span class="token punctuation">{</span>index<span class="token punctuation">,</span> data<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> data<span class="token punctuation">.</span>src<span class="token punctuation">[</span>index <span class="token operator">*</span> <span class="token number">6</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">getFillColor</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">object<span class="token punctuation">,</span> <span class="token punctuation">{</span>index<span class="token punctuation">,</span> data<span class="token punctuation">,</span> target<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> data<span class="token punctuation">.</span>src<span class="token punctuation">.</span><span class="token function">subarray</span><span class="token punctuation">(</span>index <span class="token operator">*</span> <span class="token number">6</span> <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">,</span> index <span class="token operator">*</span> <span class="token number">6</span> <span class="token operator">+</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div><p class="typography__P-sc-1pmaksm-8 cncNYa">  Optionally, the accessors can utilize the pre-allocated <code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-text">target</code> array in the second argument to further avoid creating new objects:</p><div class="gatsby-highlight" data-language="js"><pre class="typography__Pre-sc-1pmaksm-14 fjuJKd language-js"><code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-js"><span class="token comment">// Good</span>
<span class="token keyword">const</span> <span class="token constant">DATA</span> <span class="token operator">=</span> <span class="token punctuation">{</span>src<span class="token operator">:</span> binaryData<span class="token punctuation">,</span> length<span class="token operator">:</span> binaryData<span class="token punctuation">.</span>length <span class="token operator">/</span> <span class="token number">6</span><span class="token punctuation">}</span>

<span class="token keyword">new</span> <span class="token class-name">ScatterplotLayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  data<span class="token operator">:</span> <span class="token constant">DATA</span><span class="token punctuation">,</span>
  <span class="token function-variable function">getPosition</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">object<span class="token punctuation">,</span> <span class="token punctuation">{</span>index<span class="token punctuation">,</span> data<span class="token punctuation">,</span> target<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    target<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> data<span class="token punctuation">.</span>src<span class="token punctuation">[</span>index <span class="token operator">*</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    target<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> data<span class="token punctuation">.</span>src<span class="token punctuation">[</span>index <span class="token operator">*</span> <span class="token number">6</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    target<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> target<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">getRadius</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">object<span class="token punctuation">,</span> <span class="token punctuation">{</span>index<span class="token punctuation">,</span> data<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> data<span class="token punctuation">.</span>src<span class="token punctuation">[</span>index <span class="token operator">*</span> <span class="token number">6</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">getFillColor</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">object<span class="token punctuation">,</span> <span class="token punctuation">{</span>index<span class="token punctuation">,</span> data<span class="token punctuation">,</span> target<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    target<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> data<span class="token punctuation">.</span>src<span class="token punctuation">[</span>index <span class="token operator">*</span> <span class="token number">6</span> <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    target<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> data<span class="token punctuation">.</span>src<span class="token punctuation">[</span>index <span class="token operator">*</span> <span class="token number">6</span> <span class="token operator">+</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    target<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> data<span class="token punctuation">.</span>src<span class="token punctuation">[</span>index <span class="token operator">*</span> <span class="token number">6</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    target<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">255</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> target<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div><h4 style="position:relative" id="supply-attributes-directly" class="typography__H4-sc-1pmaksm-5 dMIfYV"><a href="#supply-attributes-directly" aria-label="supply attributes directly permalink" class="typography__A-sc-1pmaksm-0 dvhuEd anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Supply attributes directly</h4><p class="typography__P-sc-1pmaksm-8 cncNYa">  While the built-in attribute generation functionality is a major part of a <code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-text">Layer</code>s functionality, it can become a major bottleneck in performance since it is done on CPU in the main thread. If the application needs to push many data changes frequently, for example to render animations, data updates can block rendering and user interaction. In this case, the application should consider precalculated attributes on the back end or in web workers. </p><p class="typography__P-sc-1pmaksm-8 cncNYa">  Deck.gl layers accepts external attributes as either a typed array or a WebGL buffer. Such attributes, if prepared carefully, can be directly utilized by the GPU, thus bypassing the CPU-bound attribute generation completely.</p><p class="typography__P-sc-1pmaksm-8 cncNYa">  This technique offers the maximum performance possible in terms of data throughput, and is commonly used in heavy-duty, performance-sensitive applications.</p><p class="typography__P-sc-1pmaksm-8 cncNYa">  To generate an attribute buffer for a layer, take the results returned from each object by the <code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-text">get*</code> accessors and flatten them into a typed array. For example, consider the following layers:</p><div class="gatsby-highlight" data-language="js"><pre class="typography__Pre-sc-1pmaksm-14 fjuJKd language-js"><code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-js"><span class="token comment">// Calculate attributes on the main thread</span>
<span class="token keyword">new</span> <span class="token class-name">PointCloudLayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// data format: [{position: [0, 0, 0], color: [255, 0, 0]}, ...]</span>
  data<span class="token operator">:</span> <span class="token constant">POINT_CLOUD_DATA</span><span class="token punctuation">,</span>
  <span class="token function-variable function">getPosition</span><span class="token operator">:</span> <span class="token parameter">d</span> <span class="token operator">=&gt;</span> d<span class="token punctuation">.</span>position<span class="token punctuation">,</span>
  <span class="token function-variable function">getColor</span><span class="token operator">:</span> <span class="token parameter">d</span> <span class="token operator">=&gt;</span> d<span class="token punctuation">.</span>color<span class="token punctuation">,</span>
  getNormal<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div><p class="typography__P-sc-1pmaksm-8 cncNYa">  Should we move the attribute generation to a web worker:</p><div class="gatsby-highlight" data-language="js"><pre class="typography__Pre-sc-1pmaksm-14 fjuJKd language-js"><code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-js"><span class="token comment">// Worker</span>
<span class="token comment">// positions can be sent as either float32 or float64, depending on precision requirements</span>
<span class="token comment">// point[0].x, point[0].y, point[0].z, point[1].x, point[1].y, point[1].z, ...</span>
<span class="token keyword">const</span> positions <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Float64Array</span><span class="token punctuation">(</span><span class="token constant">POINT_CLOUD_DATA</span><span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span><span class="token parameter">d</span> <span class="token operator">=&gt;</span> d<span class="token punctuation">.</span>position<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// point[0].r, point[0].g, point[0].b, point[1].r, point[1].g, point[1].b, ...</span>
<span class="token keyword">const</span> colors <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span><span class="token constant">POINT_CLOUD_DATA</span><span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span><span class="token parameter">d</span> <span class="token operator">=&gt;</span> d<span class="token punctuation">.</span>color<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// send back to main thread</span>
<span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>pointCount<span class="token operator">:</span> <span class="token constant">POINT_CLOUD_DATA</span><span class="token punctuation">.</span>length<span class="token punctuation">,</span> positions<span class="token punctuation">,</span> colors<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>positions<span class="token punctuation">.</span>buffer<span class="token punctuation">,</span> colors<span class="token punctuation">.</span>buffer<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div><div class="gatsby-highlight" data-language="js"><pre class="typography__Pre-sc-1pmaksm-14 fjuJKd language-js"><code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-js"><span class="token comment">// Main thread</span>
<span class="token comment">// `data` is received from the worker</span>
<span class="token keyword">new</span> <span class="token class-name">PointCloudLayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  data<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// this is required so that the layer knows how many points to draw</span>
    length<span class="token operator">:</span> data<span class="token punctuation">.</span>pointCount<span class="token punctuation">,</span>
    attributes<span class="token operator">:</span> <span class="token punctuation">{</span>
      getPosition<span class="token operator">:</span> <span class="token punctuation">{</span>value<span class="token operator">:</span> data<span class="token punctuation">.</span>positions<span class="token punctuation">,</span> size<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      getColor<span class="token operator">:</span> <span class="token punctuation">{</span>value<span class="token operator">:</span> data<span class="token punctuation">.</span>colors<span class="token punctuation">,</span> size<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// constant accessor works without raw data</span>
  getNormal<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div><p class="typography__P-sc-1pmaksm-8 cncNYa">  Note that instead of <code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-text">getPosition</code>, we supply a <code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-text">data.attributes.getPosition</code> object. This object defines the buffer from which <code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-text">PointCloudLayer</code> should access its positions data. See the base <code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-text">Layer</code> class&#x27; <a class="typography__GatsbyA-sc-1pmaksm-1 dMoEUD" href="/deck.gl/docs/api-reference/core/layer#basic-properties">data prop</a> for details.</p><p class="typography__P-sc-1pmaksm-8 cncNYa">  It is also possible to use interleaved or custom layout external buffers:</p><div class="gatsby-highlight" data-language="js"><pre class="typography__Pre-sc-1pmaksm-14 fjuJKd language-js"><code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-js"><span class="token comment">// Worker</span>
<span class="token comment">// point[0].x, point[0].y, point[0].z, point[0].r, point[0].g, point[0].b, point[1].x, point[1].y, point[1].z, point[1].r, point[1].g, point[1].b, ...</span>
<span class="token keyword">const</span> positionsAndColors <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Float32Array</span><span class="token punctuation">(</span><span class="token constant">POINT_CLOUD_DATA</span><span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span><span class="token parameter">d</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
  d<span class="token punctuation">.</span>position<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  d<span class="token punctuation">.</span>position<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  d<span class="token punctuation">.</span>position<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// colors must be normalized if sent as floats</span>
  d<span class="token punctuation">.</span>color<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token number">255</span><span class="token punctuation">,</span>
  d<span class="token punctuation">.</span>color<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token number">255</span><span class="token punctuation">,</span>
  d<span class="token punctuation">.</span>color<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token number">255</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// send back to main thread</span>
<span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>pointCount<span class="token operator">:</span> <span class="token constant">POINT_CLOUD_DATA</span><span class="token punctuation">.</span>length<span class="token punctuation">,</span> positionsAndColors<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>positionsAndColors<span class="token punctuation">.</span>buffer<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div><div class="gatsby-highlight" data-language="js"><pre class="typography__Pre-sc-1pmaksm-14 fjuJKd language-js"><code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span>Buffer<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;@luma.gl/core&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Buffer</span><span class="token punctuation">(</span>gl<span class="token punctuation">,</span> <span class="token punctuation">{</span>data<span class="token operator">:</span> data<span class="token punctuation">.</span>positionsAndColors<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">PointCloudLayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  data<span class="token operator">:</span> <span class="token punctuation">{</span>
    length <span class="token operator">:</span> data<span class="token punctuation">.</span>pointCount<span class="token punctuation">,</span>
    attributes<span class="token operator">:</span> <span class="token punctuation">{</span>
      getPosition<span class="token operator">:</span> <span class="token punctuation">{</span>buffer<span class="token punctuation">,</span> size<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> offset<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> stride<span class="token operator">:</span> <span class="token number">24</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      getColor<span class="token operator">:</span> <span class="token punctuation">{</span>buffer<span class="token punctuation">,</span> size<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> offset<span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span> stride<span class="token operator">:</span> <span class="token number">24</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// constant accessor works without raw data</span>
  getNormal<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div><p class="typography__P-sc-1pmaksm-8 cncNYa">  See full example in <a href="https://github.com/visgl/deck.gl/tree/master/examples/experimental/interleaved-buffer" class="typography__A-sc-1pmaksm-0 dvhuEd">examples/experimental/interleaved-buffer</a>.</p><p class="typography__P-sc-1pmaksm-8 cncNYa">  Note that external attributes only work with primitive layers, not composite layers, because composite layers often need to preprocess the data before passing it to the sub layers. Some layers that deal with variable-width data, such as <code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-text">PathLayer</code>, <code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-text">SolidPolygonLayer</code>, require additional information passed along with <code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-text">data.attributes</code>. Consult each layer&#x27;s documentation before use.</p><h2 style="position:relative" id="layer-rendering-performance" class="typography__H2-sc-1pmaksm-3 jYCwIr"><a href="#layer-rendering-performance" aria-label="layer rendering performance permalink" class="typography__A-sc-1pmaksm-0 dvhuEd anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Layer Rendering Performance</h2><p class="typography__P-sc-1pmaksm-8 cncNYa">Layer rendering time (for large data sets) is essentially proportional to:</p><ol><li class="typography__ListItem-sc-1pmaksm-10 kVRSNy">The number of vertex shader invocations,
which corresponds to the number of items in the layer&#x27;s <code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-text">data</code> prop</li><li class="typography__ListItem-sc-1pmaksm-10 kVRSNy">The number of fragment shader invocations, which corresponds to the total
number of pixels drawn.</li></ol><p class="typography__P-sc-1pmaksm-8 cncNYa">Thus it is possible to render a scatterplot layer with 10M items with reasonable
frame rates on recent GPUs, provided that the radius (number of pixels) of each
point is small.</p><p class="typography__P-sc-1pmaksm-8 cncNYa">It is good to be aware that excessive overdraw (drawing many objects/pixels on top of each other) can generate very high fragment counts and thus hurt performance. As an example, a <code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-text">Scatterplot</code> radius of 5 pixels generates ~ 100 pixels per point. If you have a <code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-text">Scatterplot</code> layer with 10 million points, this can result in up to 1 billion fragment shader invocations per frame. While dependent on zoom levels (clipping will improve performance to some extent) this many fragments will certainly strain even a recent MacBook Pro GPU.</p><h2 style="position:relative" id="layer-picking-performance" class="typography__H2-sc-1pmaksm-3 jYCwIr"><a href="#layer-picking-performance" aria-label="layer picking performance permalink" class="typography__A-sc-1pmaksm-0 dvhuEd anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Layer Picking Performance</h2><p class="typography__P-sc-1pmaksm-8 cncNYa">deck.gl performs picking by drawing the layer into an off screen picking buffer. This essentially means that every layer that supports picking will be drawn off screen when panning and hovering. The picking is performed using the same GPU code that does the visual rendering, so the performance should be easy to predict.</p><p class="typography__P-sc-1pmaksm-8 cncNYa">Picking limitations:</p><ul class="typography__List-sc-1pmaksm-9 hsOfQe"><li class="typography__ListItem-sc-1pmaksm-10 kVRSNy">The picking system can only distinguish between 16M items per layer.</li><li class="typography__ListItem-sc-1pmaksm-10 kVRSNy">The picking system can only handle 256 layers with the pickable flag set to true.</li></ul><h2 style="position:relative" id="number-of-layers" class="typography__H2-sc-1pmaksm-3 jYCwIr"><a href="#number-of-layers" aria-label="number of layers permalink" class="typography__A-sc-1pmaksm-0 dvhuEd anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Number of Layers</h2><p class="typography__P-sc-1pmaksm-8 cncNYa">The layer count of an advanced deck.gl application tends to gradually increase, especially when using composite layers. We have built and optimized a highly complex application using close to 100 deck.gl layers (this includes hierarchies of sublayers rendered by custom composite layers rendering other composite layers) without seeing any performance issues related to the number of layers. If you really need to, it is probably possible to go a little higher (a few hundred layers). Just keep in mind that deck.gl was not designed to be used with thousands of layers.</p><h2 style="position:relative" id="common-issues" class="typography__H2-sc-1pmaksm-3 jYCwIr"><a href="#common-issues" aria-label="common issues permalink" class="typography__A-sc-1pmaksm-0 dvhuEd anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Common Issues</h2><p class="typography__P-sc-1pmaksm-8 cncNYa">A couple of particular things to watch out for that tend to have a big impact on performance:</p><ul class="typography__List-sc-1pmaksm-9 hsOfQe"><li class="typography__ListItem-sc-1pmaksm-10 kVRSNy">If not needed disable Retina/High DPI rendering. It generates 4x the number of pixels (fragments) and can have a big performance impact that depends on which computer or monitor is being used. This feature can be controlled using <code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-text">useDevicePixels</code> prop of <code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-text">DeckGL</code> component and it is on by default.</li><li class="typography__ListItem-sc-1pmaksm-10 kVRSNy">Avoid using luma.gl debug mode in production. It queries the GPU error status after each operation which has a big impact on performance.</li></ul><p class="typography__P-sc-1pmaksm-8 cncNYa">Smaller considerations:</p><ul class="typography__List-sc-1pmaksm-9 hsOfQe"><li class="typography__ListItem-sc-1pmaksm-10 kVRSNy">Enabling picking can have a small performance penalty so make sure the <code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-text">pickable</code> property is <code class="typography__InlineCode-sc-1pmaksm-12 gicMXt language-text">false</code> in layers that do not need picking (this is the default value).</li></ul></div></div></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/docs/developer-guide/performance";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-dd556f3ef0bc8b9d13cd.js"],"app":["/app-9d5aa6e835da781ed375.js"],"component---node-modules-gatsby-theme-ocular-src-react-templates-documentation-jsx":["/component---node-modules-gatsby-theme-ocular-src-react-templates-documentation-jsx-b5c6fcc0e706ecb665be.js"],"component---node-modules-gatsby-theme-ocular-src-react-templates-examples-jsx":["/component---node-modules-gatsby-theme-ocular-src-react-templates-examples-jsx-90990f3b8f90e0c4e8c0.js"],"component---node-modules-gatsby-theme-ocular-src-react-templates-search-jsx":["/component---node-modules-gatsby-theme-ocular-src-react-templates-search-jsx-176f4bc0dc86940d1fef.js"],"component---src-examples-arc-layer-js":["/component---src-examples-arc-layer-js-2f3f1a951f5eea369936.js"],"component---src-examples-arcgis-js":["/component---src-examples-arcgis-js-fd5fdcd42ea256d948c8.js"],"component---src-examples-brushing-extension-js":["/component---src-examples-brushing-extension-js-839d66838b52093142c8.js"],"component---src-examples-carto-js":["/component---src-examples-carto-js-b09dbd50967b4be50dd2.js"],"component---src-examples-contour-layer-js":["/component---src-examples-contour-layer-js-aef3a3f76f43f19077a3.js"],"component---src-examples-data-filter-extension-js":["/component---src-examples-data-filter-extension-js-2a8b77d1b0eee78543ab.js"],"component---src-examples-first-person-view-js":["/component---src-examples-first-person-view-js-89acef2ffe590c270462.js"],"component---src-examples-geojson-layer-paths-js":["/component---src-examples-geojson-layer-paths-js-3e958ab137441547c01b.js"],"component---src-examples-geojson-layer-polygons-js":["/component---src-examples-geojson-layer-polygons-js-450822b2dcc24dd64e52.js"],"component---src-examples-globe-view-js":["/component---src-examples-globe-view-js-004625c7322c7e1f2fd8.js"],"component---src-examples-google-maps-js":["/component---src-examples-google-maps-js-b2b7720e1a85bc37ccca.js"],"component---src-examples-heatmap-layer-js":["/component---src-examples-heatmap-layer-js-9b375bab88002aaa6b01.js"],"component---src-examples-hexagon-layer-js":["/component---src-examples-hexagon-layer-js-0ff5eb125b5871281e85.js"],"component---src-examples-icon-layer-js":["/component---src-examples-icon-layer-js-7810dd8f750165ce2ee1.js"],"component---src-examples-line-layer-js":["/component---src-examples-line-layer-js-2340b4e1a156855f4d93.js"],"component---src-examples-mapbox-js":["/component---src-examples-mapbox-js-b16fe272073d1f0018f1.js"],"component---src-examples-multi-view-js":["/component---src-examples-multi-view-js-930b4ae83482cb90be26.js"],"component---src-examples-orthographic-view-js":["/component---src-examples-orthographic-view-js-37eed53a1321e99f1ef1.js"],"component---src-examples-plot-js":["/component---src-examples-plot-js-d12e72e4ef36a6f4e2cb.js"],"component---src-examples-point-cloud-layer-js":["/component---src-examples-point-cloud-layer-js-de20b41d6e92e95dc0ab.js"],"component---src-examples-scatterplot-layer-js":["/component---src-examples-scatterplot-layer-js-6107d9c627d9002a55c1.js"],"component---src-examples-scenegraph-layer-js":["/component---src-examples-scenegraph-layer-js-50472c67f78213ff411c.js"],"component---src-examples-screen-grid-layer-js":["/component---src-examples-screen-grid-layer-js-cd069cc963300d1502f9.js"],"component---src-examples-terrain-layer-js":["/component---src-examples-terrain-layer-js-00b43303a50c97bef94c.js"],"component---src-examples-text-layer-js":["/component---src-examples-text-layer-js-229d9c77860fd03b810a.js"],"component---src-examples-tile-3-d-layer-js":["/component---src-examples-tile-3-d-layer-js-97d27d132443526ea219.js"],"component---src-examples-tile-layer-js":["/component---src-examples-tile-layer-js-dc77b5d5fb9c666f8e00.js"],"component---src-examples-tile-layer-non-geospatial-js":["/component---src-examples-tile-layer-non-geospatial-js-dbf090b89deeb5b2289c.js"],"component---src-examples-trips-layer-js":["/component---src-examples-trips-layer-js-5c1f76206dc24196a69f.js"],"component---src-index-js":["/component---src-index-js-00873747e522b8a80246.js"],"component---src-showcase-js":["/component---src-showcase-js-928215bc2809e288ae42.js"]};/*]]>*/</script><script src="/deck.gl/polyfill-dd556f3ef0bc8b9d13cd.js" nomodule=""></script><script src="/deck.gl/component---node-modules-gatsby-theme-ocular-src-react-templates-documentation-jsx-b5c6fcc0e706ecb665be.js" async=""></script><script src="/deck.gl/app-9d5aa6e835da781ed375.js" async=""></script><script src="/deck.gl/fe95a7ce-dbeb3f898ac885544664.js" async=""></script><script src="/deck.gl/2d7ef48f-f748d0e17429148f6483.js" async=""></script><script src="/deck.gl/framework-a5153769f2c95affa126.js" async=""></script><script src="/deck.gl/webpack-runtime-ac97f0dd661c36ee129d.js" async=""></script></body></html>